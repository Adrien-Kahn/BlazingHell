{"version":3,"sources":["api.ts","pages/dashboard/LastUpdated.tsx","common/tableUtils.ts","common/util.ts","common/ExpandControls.tsx","common/LabeledDatum.tsx","common/UsageBar.tsx","pages/dashboard/logical-view/ActorStateRepr.tsx","pages/dashboard/logical-view/ActorDetailsPane.tsx","pages/dashboard/logical-view/Actor.tsx","pages/dashboard/logical-view/ActorClassGroup.tsx","pages/dashboard/logical-view/ActorClassGroups.tsx","pages/dashboard/logical-view/LogicalView.tsx","pages/dashboard/state.ts","common/formatUtils.ts","pages/dashboard/memory/MemorySummary.tsx","common/TableCell.tsx","common/SortableTableHead.tsx","pages/dashboard/memory/MemoryTableRow.tsx","pages/dashboard/memory/MemoryTable.tsx","pages/dashboard/memory/MemoryRowGroup.tsx","pages/dashboard/memory/Memory.tsx","common/DialogWithTitle.tsx","common/NumberedLines.tsx","pages/dashboard/node-info/dialogs/errors/Errors.tsx","pages/dashboard/node-info/dialogs/logs/Logs.tsx","pages/dashboard/node-info/features/CPU.tsx","pages/dashboard/node-info/features/Disk.tsx","common/SpanButton.tsx","pages/dashboard/node-info/features/Errors.tsx","common/CustomTypography.tsx","pages/dashboard/node-info/features/GPU.tsx","pages/dashboard/node-info/features/GRAM.tsx","pages/dashboard/node-info/features/Host.tsx","pages/dashboard/node-info/features/Logs.tsx","pages/dashboard/node-info/features/ObjectStoreMemory.tsx","pages/dashboard/node-info/features/RAM.tsx","pages/dashboard/node-info/features/Received.tsx","pages/dashboard/node-info/features/Sent.tsx","pages/dashboard/node-info/features/Uptime.tsx","pages/dashboard/node-info/features/Workers.tsx","pages/dashboard/node-info/NodeWorkerRow.tsx","pages/dashboard/node-info/NodeRowGroup.tsx","pages/dashboard/node-info/TotalRow.tsx","pages/dashboard/node-info/NodeInfo.tsx","pages/dashboard/ray-config/RayConfig.tsx","pages/dashboard/tune/TuneErrors.tsx","pages/dashboard/tune/TuneTable.tsx","pages/dashboard/tune/TuneTensorBoard.tsx","pages/dashboard/tune/Tune.tsx","pages/dashboard/Dashboard.tsx","store.ts","App.tsx","index.tsx"],"names":["ActorState","base","window","location","origin","get","path","params","a","url","URL","Object","entries","key","value","searchParams","set","fetch","toString","response","json","result","msg","data","Error","isFullActorInfo","actorInfo","state","Infeasible","PendingResources","getErrors","nodeIp","pid","getLogs","ip","launchProfiling","nodeId","duration","node_id","getProfilingResultURL","profilingId","encodeURIComponent","getTuneInfo","setTuneExperiment","experiment","enableTuneTensorBoard","getMemoryTable","groupByKey","groupBy","setMemoryTableCollection","shouldFetch","LastUpdated","this","props","classes","lastUpdatedAt","error","className","root","Typography","lastUpdated","Date","toLocaleString","React","Component","connect","dashboard","withStyles","theme","createStyles","marginTop","spacing","color","palette","text","secondary","fontSize","textAlign","main","descendingComparator","b","orderBy","descendingComparatorFnAccessor","orderByFn","aVal","bVal","getFnComparator","order","stableSort","array","comparator","stabilizedThis","map","el","index","sort","getWeightedAverage","input","length","totalWeightTimesValue","totalWeight","weight","sum","vals","reduce","acc","val","Minimizer","onClick","Expander","useLabeledDatumStyles","makeStyles","tooltipLabel","textDecorationLine","textDecorationColor","textDecorationThickness","textDecorationStyle","cursor","LabeledDatum","label","datum","tooltip","innerHtml","Grid","container","item","xs","Box","Tooltip","title","useUsageBarStyles","borderColor","divider","borderStyle","borderWidth","display","flexGrow","inner","paddingLeft","paddingRight","UsageBar","percent","safePercent","Math","max","min","minColor","leftColor","rightColor","ratio","r1","g1","b1","blend","gradient","join","style","background","align","Alive","Dead","PendingCreation","Restarting","DependenciesUnready","useActorStateReprStyles","infeasible","light","pendingResources","warning","unknown","creating","success","alive","dark","restarting","dead","stateToTooltip","ActorStateRepr","body","variant","showTooltip","variantOrDefault","memoryDebuggingDocLink","useStyles","width","margin","actorTitleWrapper","marginBottom","fontWeight","detailsPane","ActorDetailsPane","actor","actorData","usedResources","localeCompare","resourceSlots","slot","allocation","taskQueueLength","numExecutedTasks","numObjectRefsInScope","numLocalObjects","usedObjectStoreMemory","actorId","requiredResources","labeledActorData","Fragment","actorClass","processStats","cpuPercent","gpus","gpu","gpuUtilization","utilizationGpu","component","uuid","name","Divider","useActorStyles","padding","action","primary","textDecoration","webuiDisplay","inlineHTML","Actor","useState","profiling","setProfiling","handleProfilingClick","startTime","now","latestResponse","checkProfilingStatusLoop","profiling_id","status","setTimeout","actorCustomDisplay","keys","_","__","valueEncoded","valueParsed","JSON","parse","valueRendered","dangerouslySetInnerHTML","__html","actorIpAddress","actorPort","ipAddress","port","round","href","rel","target","trim","undefined","asSeconds","n","CenteredBox","styled","useActorClassGroupStyles","marginLeft","actorEntry","ActorClassGroup","actorGroup","expanded","setExpanded","toggleExpanded","i","summary","Paper","stateToCount","avgLifetime","maxLifetime","ActorClassGroups","actorGroups","numInfeasible","group","totalInfeasible","values","warningOpen","setWarningOpen","children","title1","group1","title2","group2","infeasible1","infeasible2","Snackbar","open","Alert","severity","onClose","useLogicalViewStyles","actorGroupsSelector","LogicalView","nameFilter","setNameFilter","useDebounce","debouncedNameFilter","useSelector","filteredGroups","filter","loweredNameFilter","toLowerCase","search","actorClassMatchesSearch","FormControl","InputLabel","htmlFor","Input","id","aria-describedby","onChange","event","FormHelperText","fromEntries","slice","createSlice","initialState","tab","rayConfig","nodeInfo","tuneInfo","tuneAvailability","memoryTable","shouldObtainMemoryTable","reducers","setTab","payload","setRayConfig","setNodeInfo","setActorGroups","setTuneInfo","setTuneAvailability","setError","setMemoryTable","setShouldObtainMemoryTable","dashboardActions","actions","dashboardReducer","reducer","formatByteAmount","amount","unit","pow","toFixed","formatUsage","used_b","total_b","includePercentage","usedFormatted","totalFormatted","ratioStr","formatDuration","durationInSeconds","durationSeconds","floor","durationMinutes","durationHours","durationDays","pad","padStart","formatValue","rawFloat","split","abs","valueOf","toPrecision","toExponential","e","useMemorySummaryStyles","expandCollapseIcon","verticalAlign","MemorySummary","memoryTableSummary","memoryData","totalLocalRefCount","totalPinnedInMemory","totalUsedByPendingTask","totalCapturedInObjects","totalObjectSize","totalActorHandles","StyledTableCell","TableCell","useSortableTableHeadStyles","visuallyHidden","border","clip","height","overflow","position","top","SortableTableHead","onRequestSort","headerInfo","firstColumnEmpty","TableHead","TableRow","sortable","numeric","sortDirection","TableSortLabel","active","direction","MemoryTableRow","memoryTableEntry","object_size","objectSize","memoryTableEntryValues","nodeIpAddress","type","objectRef","referenceType","callSite","hover","useMemoryTableStyles","cell","memoryHeaderInfo","MemoryTable","tableEntries","setOrder","setOrderBy","getComparator","tableRows","tableEntry","elevation","Table","property","TableBody","useMemoryRowGroupStyles","paddingTop","paddingBottom","MemoryRowGroup","groupKey","groupTitle","initialExpanded","initialVisibleEntries","numVisibleEntries","setNumVisibleEntries","visibleEntries","stackTrace","PyStackTrace","renderedFrames","frame","useMemoryInfoStyles","pauseButton","float","select","minWidth","memoryTableSelector","isEmpty","loadTimerComplete","mountedAt","getTime","MemoryInfo","dispatch","useDispatch","paused","setPaused","pauseButtonIcon","setGroupBy","useEffect","setResults","fetchData","useCallback","resp","intervalId","useRef","current","setInterval","clearInterval","CircularProgress","memoryGroup","shrink","Select","labelId","displayEmpty","MenuItem","Button","DialogWithTitle","handleClose","Dialog","paper","fullWidth","maxWidth","scroll","IconButton","closeButton","right","zIndex","borderBottomColor","borderBottomStyle","borderBottomWidth","lineHeight","NumberedLines","lines","line","classNames","lineNumber","data-line-number","overflowX","fontFamily","content","whiteSpace","Errors","setState","errors","clearErrorDialog","header","message","timestamp","backgroundColor","fade","borderLeftColor","borderLeftStyle","borderLeftWidth","Logs","logs","clearLogDialog","log","cpuFeature","ClusterFeatureRenderFn","nodes","cpuWeightedAverage","node","cpus","cpu","NodeFeatureRenderFn","WorkerFeatureRenderFn","worker","nodeAccessor","workerAccessor","diskFeature","used","total","disk","SpanButton","otherProps","button","ClusterErrors","totalErrCount","errorCount","makeNodeErrors","setErrorDialog","nodeErrorsAccessor","makeWorkerErrors","workerErrorsAccessor","makeErrorsFeature","RightPaddedTypography","nodeGPUUtilization","NaN","gpusWithUtilInfo","NodeGPUEntry","WorkerGPUEntry","resourceSlot","slotMsg","gpuFeature","clusterAverageUtilization","utils","util","isNaN","clusterGPUUtilization","hasGPU","workerRes","coreWorkerStats","workerUsedGPUResources","slot1","slot2","workerGPUUtilization","nodeGRAMUtilization","utilization","memoryUsed","memoryTotal","GRAMEntry","gpuName","MiBRatioNoPercent","gramFeature","clusterGRAMUtilization","nodeGRAMEntries","workerGRAMEntries","process","processes","find","gpuMemoryUsage","entry","nodeGRAMUtil","workerUtilPerGPU","proc","workerGRAMUtilization","hostFeature","hostname","cmdline","ClusterLogs","totalLogCount","logCount","makeNodeLogs","setLogDialog","nodeLogsAccessor","makeWorkerLogs","workerLogsAccessor","makeLogsFeature","objectStoreMemoryFeature","totalAvailable","raylet","objectStoreAvailableMemory","totalUsed","objectStoreUsedMemory","usageRatio","ramFeature","mem","memoryInfo","rss","receivedFeature","totalReceived","net","sentFeature","totalSent","getUptime","bootTime","uptimeFeature","createTime","workersFeature","totalCpus","totalWorkers","workers","NodeWorkerRow","features","WorkerFeature","useNodeRowGroupStyles","expandCollapseCell","extraInfo","NodeRowGroup","rayletInfo","workerFeatureData","renderedNodeFeatures","nodeInfoFeature","FeatureComponent","colSpan","featureData","feature","useTotalRowStyles","borderTopColor","borderTopStyle","borderTopWidth","totalIcon","TotalRow","ClusterFeature","sortWorkers","sortWorkerComparator","idleSortedClusterWorkers","wfd1","wfd2","w1","w2","useNodeInfoStyles","table","liveNodesSelector","clients","nodeInfoHeaders","NodeInfo","logDialog","errorDialog","isGrouped","setIsGrouped","clusterTotalWorkers","nodeInfoFeatures","sortNodeAccessor","sortNodeComparator","sortWorkerAccessor","showGPUs","filterPredicate","filteredFeatures","filteredHeaders","tableContents","sortGroupComparator","sortedClusterWorkers","makeGroupedTableContents","workerInfoFeatures","allWorkerFeatures","flatMap","workerFeatureDatum","makeUngroupedTableContents","FormControlLabel","control","Checkbox","checked","useRayConfigStyles","configSelector","RayConfig","refreshData","formattedRayConfig","autoscalingMode","headType","workerType","minWorkers","initialWorkers","maxWorkers","idleTimeoutMinutes","mapDispatchToProps","TuneErrors","currentError","handleOpen","jobId","trialId","Link","TuneTable","timeout","sortedColumn","ascending","metricParamColumn","metricColumns","paramColumns","errorTrial","onColumnClick","column","humanize","str","part","charAt","toUpperCase","sortedCell","chosenMetricParam","sortedTrialRecords","trialRecords","trialDetails","getAttribute","trial","handleMetricChoiceChange","push","metricChoices","metricNames","FormLabel","FormGroup","includes","handleParamChoiceChange","paramChoices","paramNames","paramChecklist","firstTrial","paramsDict","k","viewableParams","paramOptions","metrics","viewableMetrics","metricOptions","checkboxRoot","stickyHeader","Number","overflowY","TuneTensorBoard","tensorBoardEnabled","loading","handleSubmit","then","tensorBoard","tensorboard","tensorboardCurrent","src","board","enabled","tensorboardEnabled","progress","size","Tune","tabIndex","refreshTuneInfo","available","handleTabChange","handleExperimentChange","handleExperimentSubmit","clearTimeout","experimentChoice","prompt","heading","TextField","submit","trialsAvailable","tabs","SelectedComponent","Tabs","indicatorColor","textColor","Tab","fontsize","warningIcon","formControl","useDashboardStyles","tabSelector","tuneAvailabilitySelector","allTabs","Dashboard","refreshInfo","Promise","all","view","splice","store","configureStore","devTools","App","CssBaseline","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.518a6fb3.chunk.js","sourcesContent":["const base =\n  process.env.NODE_ENV === \"development\"\n    ? \"http://localhost:8265\"\n    : window.location.origin;\n\ntype APIResponse<T> = {\n  result: boolean;\n  msg: string;\n  data?: T;\n};\n// TODO(mitchellstern): Add JSON schema validation for the responses.\nconst get = async <T>(path: string, params: { [key: string]: any }) => {\n  const url = new URL(path, base);\n  for (const [key, value] of Object.entries(params)) {\n    url.searchParams.set(key, value);\n  }\n\n  const response = await fetch(url.toString());\n  const json: APIResponse<T> = await response.json();\n\n  const { result, msg, data } = json;\n\n  if (!result) {\n    throw Error(msg);\n  }\n\n  return data as T;\n};\n\nexport type RayConfigResponse = {\n  minWorkers: number;\n  maxWorkers: number;\n  initialWorkers: number;\n  autoscalingMode: string;\n  idleTimeoutMinutes: number;\n  headType: string;\n  workerType: string;\n};\n\nexport const getRayConfig = () => get<RayConfigResponse>(\"/api/ray_config\", {});\n\ntype ProcessStats = {\n  pid: number;\n  memoryInfo: {\n    rss: number;\n    vms: number;\n    shared: number;\n    text: number;\n    lib: number;\n    data: number;\n    dirty: Number;\n  };\n  createTime: number;\n  cmdline: string[];\n  cpuTimes: {\n    user: number;\n    system: number;\n    childrenUser: number;\n    childrenSystem: number;\n    iowait: number;\n  };\n  cpuPercent: number;\n};\n\nexport type Worker = {\n  pid: number;\n  workerId: string;\n  logCount?: number;\n  errorCount?: number;\n  language: string;\n  jobId: string;\n  coreWorkerStats: CoreWorkerStats[];\n} & ProcessStats;\n\nexport type CoreWorkerStats = {\n  ipAddress: string;\n  port: number;\n  usedResources?: { [key: string]: ResourceAllocations };\n  numExecutedTasks: number;\n  workerId: string;\n  // We need the below but Ant's API does not yet support it.\n};\n\nexport type GPUProcessStats = {\n  // Sub stat of GPU stats, this type represents the GPU\n  // utilization of a single process of a single GPU.\n  username: string;\n  command: string;\n  gpuMemoryUsage: number;\n  pid: number;\n};\n\nexport type GPUStats = {\n  // This represents stats fetched from a node about a single GPU\n  uuid: string;\n  name: string;\n  temperatureGpu: number;\n  fanSpeed: number;\n  utilizationGpu?: number;\n  powerDraw: number;\n  enforcedPowerLimit: number;\n  memoryUsed: number;\n  memoryTotal: number;\n  processes: GPUProcessStats[];\n};\n\nexport type NodeSummary = BaseNodeInfo;\n\nexport type NodeDetails = {\n  workers: Worker[];\n  raylet: RayletData;\n} & BaseNodeInfo;\n\nexport type RayletData = {\n  // Merger of GCSNodeInfo and GetNodeStatsReply\n  // GetNodeStatsReply fields.\n  // Note workers are in an array in NodeDetails\n  objectStoreUsedMemory: number;\n  objectStoreAvailableMemory: number;\n  numWorkers: number;\n\n  // GCSNodeStats fields\n  nodeId: number;\n  nodeManagerAddress: string;\n  rayletSocketName: string;\n  objectStoreSocketName: string;\n  nodeManagerPort: number;\n  objectManagerPort: number;\n  state: \"ALIVE\" | \"DEAD\";\n  nodeManagerHostname: string;\n  metricsExportPort: number;\n};\n\nexport type ViewData = {\n  viewName: string;\n  measures: Measure[];\n};\n\nexport type Measure = {\n  tags: string; // e.g.  \"Tag1:Value1,Tag2:Value2,Tag3:Value3\"\n  intValue?: number;\n  doubleValue?: number;\n  distributionMin?: number;\n  distributionMean?: number;\n  distributionMax?: number;\n  distributionCount?: number;\n  distributionBucketBoundaries?: number[];\n  distributionBucketCounts?: number[];\n};\n\ntype BaseNodeInfo = {\n  now: number;\n  hostname: string;\n  ip: string;\n  bootTime: number; // System boot time expressed in seconds since epoch\n  cpu: number; // System-wide CPU utilization expressed as a percentage\n  cpus: [number, number]; // Number of logical CPUs and physical CPUs\n  gpus: Array<GPUStats>; // GPU stats fetched from node, 1 entry per GPU\n  mem: [number, number, number]; // Total, available, and used percentage of memory\n  disk: {\n    [dir: string]: {\n      total: number;\n      free: number;\n      used: number;\n      percent: number;\n    };\n  };\n  loadAvg: [[number, number, number], [number, number, number]];\n  net: [number, number]; // Sent and received network traffic in bytes / second\n  logCount?: number;\n  errorCount?: number;\n};\n\nexport type NodeInfoResponse = {\n  clients: NodeDetails[];\n};\n\nexport const getNodeInfo = () =>\n  get<NodeInfoResponse>(\"/nodes\", { view: \"details\" });\n\nexport type ResourceSlot = {\n  slot: number;\n  allocation: number;\n};\n\nexport type ResourceAllocations = {\n  resourceSlots: ResourceSlot[];\n};\n\nexport const getActorGroups = () =>\n  get<ActorsResponse>(\"logical/actor_groups\", {});\n\nexport enum ActorState {\n  // These two are virtual states that we air because there is\n  // an existing task to create an actor\n  Infeasible = \"INFEASIBLE\", // Actor task is waiting on resources (e.g. RAM, CPUs or GPUs) that the cluster does not have\n  PendingResources = \"PENDING_RESOURCES\", // Actor task is waiting on resources the cluster has but are in-use\n  // The rest below are \"official\" GCS actor states\n  DependenciesUnready = \"PENDING\", // Actor is pending on an argument to be ready\n  PendingCreation = \"CREATING\", // Actor creation is running\n  Alive = \"ALIVE\", // Actor is alive and handling tasks\n  Restarting = \"RESTARTING\", // Actor died and is being restarted\n  Dead = \"DEAD\", // Actor died and is not being restarted\n}\n\nexport type ActorInfo = FullActorInfo | ActorTaskInfo;\n\nexport type FullActorInfo = {\n  actorId: string;\n  actorConstructor: string;\n  actorClass: string;\n  ipAddress: string;\n  jobId: string;\n  nodeId: string;\n  numExecutedTasks?: number;\n  numLocalObjects?: number;\n  numObjectRefsInScope?: number;\n  pid: number;\n  port: number;\n  state:\n    | ActorState.Alive\n    | ActorState.Restarting\n    | ActorState.Dead\n    | ActorState.DependenciesUnready\n    | ActorState.PendingCreation;\n  taskQueueLength?: number;\n  gpus: GPUStats[]; // Contains info about any GPUs the actor is using\n  timestamp: number;\n  usedObjectStoreMemory?: number;\n  usedResources: { [key: string]: ResourceAllocations };\n  currentTaskDesc?: string;\n  numPendingTasks?: number;\n  webuiDisplay?: Record<string, string>;\n  processStats?: ProcessStats;\n};\n\nexport type ActorTaskInfo = {\n  actorId: string;\n  actorClass: string;\n  requiredResources?: { [key: string]: number };\n  state: ActorState.Infeasible | ActorState.PendingResources;\n};\n\n// eslint-disable-next-line\nexport function isFullActorInfo(\n  actorInfo: ActorInfo,\n): actorInfo is FullActorInfo {\n  // Lint disabled because arrow functions don't play well with type guards.\n  // This function is used to determine what kind of information we have about\n  // a given actor in a response based on its state.\n  return (\n    actorInfo.state !== ActorState.Infeasible &&\n    actorInfo.state !== ActorState.PendingResources\n  );\n}\n\nexport type ActorGroupSummary = {\n  stateToCount: { [state in ActorState]: number };\n  avgLifetime: number;\n  maxLifetime: number;\n  numExecutedTasks: number;\n};\n\nexport type ActorGroup = {\n  entries: ActorInfo[];\n  summary: ActorGroupSummary;\n};\n\nexport type ActorsResponse = {\n  actorGroups: {\n    [key: string]: ActorGroup;\n  };\n};\n\nexport type ErrorsResponse = {\n  errors: ErrorsByPid;\n};\n\nexport type ErrorsByPid = {\n  [pid: string]: {\n    message: string;\n    timestamp: number;\n    type: string;\n  }[];\n};\nexport const getErrors = (nodeIp: string, pid: number | null) =>\n  get<ErrorsResponse>(\"/node_errors\", {\n    nodeIp,\n    pid: pid ?? \"\",\n  });\n\nexport type LogsResponse = {\n  logs: LogsByPid;\n};\n\nexport type LogsByPid = {\n  [pid: string]: string[];\n};\n\nexport const getLogs = (nodeIp: string, pid: number | null) =>\n  get<LogsResponse>(\"/node_logs\", {\n    ip: nodeIp,\n    pid: pid ?? \"\",\n  });\n\nexport type LaunchProfilingResponse = string;\n\nexport const launchProfiling = (\n  nodeId: string,\n  pid: number,\n  duration: number,\n) =>\n  get<LaunchProfilingResponse>(\"/api/launch_profiling\", {\n    node_id: nodeId,\n    pid: pid,\n    duration: duration,\n  });\n\nexport type CheckProfilingStatusResponse =\n  | { status: \"pending\" }\n  | { status: \"finished\" }\n  | { status: \"error\"; error: string };\n\nexport const checkProfilingStatus = (profilingId: string) =>\n  get<CheckProfilingStatusResponse>(\"/api/check_profiling_status\", {\n    profiling_id: profilingId,\n  });\n\nexport const getProfilingResultURL = (profilingId: string) =>\n  `${base}/speedscope/index.html#profileURL=${encodeURIComponent(\n    `${base}/api/get_profiling_info?profiling_id=${profilingId}`,\n  )}`;\n\nexport const launchKillActor = (\n  actorId: string,\n  actorIpAddress: string,\n  actorPort: number,\n) =>\n  get<{}>(\"/logical/kill_actor\", {\n    // make sure object is okay\n    actorId: actorId,\n    ipAddress: actorIpAddress,\n    port: actorPort,\n  });\n\nexport type TuneTrial = {\n  date: string;\n  episodesTotal: string;\n  experimentId: string;\n  experimentTag: string;\n  hostname: string;\n  iterationsSinceRestore: number;\n  logdir: string;\n  nodeIp: string;\n  pid: number;\n  timeSinceRestore: number;\n  timeThisIterS: number;\n  timeTotalS: number;\n  timestamp: number;\n  timestepsSinceRestore: number;\n  timestepsTotal: number;\n  trainingIteration: number;\n  startTime: string;\n  status: string;\n  trialId: string | number;\n  jobId: string;\n  params: { [key: string]: string | number };\n  metrics: { [key: string]: string | number };\n  error: string;\n};\n\nexport type TuneError = {\n  text: string;\n  jobId: string;\n  trialId: string;\n};\n\nexport type TuneJobResponse = {\n  result: TuneJob;\n};\n\nexport type TuneJob = {\n  trialRecords: { [key: string]: TuneTrial };\n  errors: { [key: string]: TuneError };\n  tensorboard: {\n    tensorboardCurrent: boolean;\n    tensorboardEnabled: boolean;\n  };\n};\n\nexport const getTuneInfo = () => get<TuneJobResponse>(\"/tune/info\", {});\n\nexport type TuneAvailability = {\n  available: boolean;\n  trialsAvailable: boolean;\n};\n\nexport type TuneAvailabilityResponse = {\n  result: TuneAvailability;\n};\n\nexport const getTuneAvailability = () =>\n  get<TuneAvailabilityResponse>(\"/tune/availability\", {});\n\nexport type TuneSetExperimentResponse = {\n  experiment: string;\n};\n\nexport const setTuneExperiment = (experiment: string) =>\n  get<TuneSetExperimentResponse>(\"/tune/set_experiment\", {\n    experiment: experiment,\n  });\n\nexport const enableTuneTensorBoard = () =>\n  get<{}>(\"/tune/enable_tensorboard\", {});\n\nexport type MemoryTableSummary = {\n  totalActorHandles: number;\n  totalCapturedInObjects: number;\n  totalLocalRefCount: number;\n  // The measurement is B.\n  totalObjectSize: number;\n  totalPinnedInMemory: number;\n  totalUsedByPendingTask: number;\n};\n\nexport type MemoryTableEntry = {\n  nodeIpAddress: string;\n  pid: number;\n  type: string;\n  objectRef: string;\n  objectSize: number;\n  referenceType: string;\n  callSite: string;\n};\n\nexport type MemoryTable = {\n  group: MemoryTableGroups;\n  summary: MemoryTableSummary;\n};\n\nexport type MemoryTableGroups = {\n  [groupKey: string]: MemoryTableGroup;\n};\n\nexport type MemoryTableGroup = {\n  entries: MemoryTableEntry[];\n  summary: MemoryTableSummary;\n};\n\nexport type MemoryTableResponse = {\n  memoryTable: MemoryTable;\n};\n\n// This doesn't return anything.\nexport type StopMemoryTableResponse = {};\n\nexport type MemoryGroupByKey = \"node\" | \"stack_trace\" | \"\";\n\nexport const getMemoryTable = async (groupByKey: MemoryGroupByKey) => {\n  return get<MemoryTableResponse>(\"/memory/memory_table\", {\n    groupBy: groupByKey,\n  });\n};\n\nexport const setMemoryTableCollection = (value: boolean) =>\n  get<{}>(\"/memory/set_fetch\", { shouldFetch: value });\n","import {\n  createStyles,\n  Theme,\n  Typography,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { StoreState } from \"../../store\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      marginTop: theme.spacing(2),\n    },\n    lastUpdated: {\n      color: theme.palette.text.secondary,\n      fontSize: \"0.8125rem\",\n      textAlign: \"center\",\n    },\n    error: {\n      color: theme.palette.error.main,\n      fontSize: \"0.8125rem\",\n      textAlign: \"center\",\n    },\n  });\n\nconst mapStateToProps = (state: StoreState) => ({\n  lastUpdatedAt: state.dashboard.lastUpdatedAt,\n  error: state.dashboard.error,\n});\n\nclass LastUpdated extends React.Component<\n  WithStyles<typeof styles> & ReturnType<typeof mapStateToProps>\n> {\n  render() {\n    const { classes, lastUpdatedAt, error } = this.props;\n    return (\n      <div className={classes.root}>\n        {lastUpdatedAt !== null && (\n          <Typography className={classes.lastUpdated}>\n            Last updated: {new Date(lastUpdatedAt).toLocaleString()}\n          </Typography>\n        )}\n        {error !== null && (\n          <Typography className={classes.error}>{error}</Typography>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps)(withStyles(styles)(LastUpdated));\n","export const descendingComparator = <T>(a: T, b: T, orderBy: keyof T) => {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n};\n\nconst descendingComparatorFnAccessor = <T>(\n  a: T,\n  b: T,\n  orderByFn: Accessor<T>,\n) => {\n  const aVal = orderByFn(a);\n  const bVal = orderByFn(b);\n  if (bVal < aVal) {\n    return -1;\n  }\n  if (bVal > aVal) {\n    return 1;\n  }\n  return 0;\n};\n\nexport type Order = \"asc\" | \"desc\";\nexport type Comparator<T> = (a: T, b: T) => number;\nexport type Accessor<T> = (a: T) => number | string;\n\nexport const getComparator = <Key extends keyof any>(\n  order: Order,\n  orderBy: Key,\n): ((\n  a: { [key in Key]: number | string },\n  b: { [key in Key]: number | string },\n) => number) => {\n  return order === \"desc\"\n    ? (a, b) => descendingComparator(a, b, orderBy)\n    : (a, b) => -descendingComparator(a, b, orderBy);\n};\n\nexport const getFnComparator = <T>(order: Order, orderByFn: Accessor<T>) => (\n  a: T,\n  b: T,\n): number => {\n  return order === \"desc\"\n    ? descendingComparatorFnAccessor(a, b, orderByFn)\n    : -descendingComparatorFnAccessor(a, b, orderByFn);\n};\n\nexport const stableSort = <T>(array: T[], comparator: Comparator<T>) => {\n  const stabilizedThis = array.map((el, index) => [el, index] as [T, number]);\n  stabilizedThis.sort((a, b) => {\n    const order = comparator(a[0], b[0]);\n    if (order !== 0) {\n      return order;\n    }\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map((el) => el[0]);\n};\n","export const getWeightedAverage = (\n  input: {\n    weight: number;\n    value: number;\n  }[],\n) => {\n  if (input.length === 0) {\n    return 0;\n  }\n\n  let totalWeightTimesValue = 0;\n  let totalWeight = 0;\n  for (const { weight, value } of input) {\n    totalWeightTimesValue += weight * value;\n    totalWeight += weight;\n  }\n  return totalWeightTimesValue / totalWeight;\n};\n\nexport const sum = (vals: number[]) => vals.reduce((acc, val) => acc + val, 0);\n\nexport const filterObj = (obj: Object, filterFn: any) =>\n  Object.fromEntries(Object.entries(obj).filter(filterFn));\n\nexport const mapObj = (obj: Object, filterFn: any) =>\n  Object.fromEntries(Object.entries(obj).map(filterFn));\n","import ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport React from \"react\";\n\ntype MinimizerProps = {\n  onClick: React.MouseEventHandler;\n};\n\ntype ExpanderProps = {\n  onClick: React.MouseEventHandler;\n};\n\nexport const Minimizer: React.FC<MinimizerProps> = ({ onClick }) => (\n  <ExpandLessIcon onClick={onClick} />\n);\n\nexport const Expander: React.FC<ExpanderProps> = ({ onClick }) => (\n  <ExpandMoreIcon onClick={onClick} />\n);\n","import { Box, Grid, makeStyles, Tooltip } from \"@material-ui/core\";\nimport React, { ReactChild } from \"react\";\n\ntype LabeledDatumProps = {\n  label: ReactChild;\n  datum: any;\n  tooltip?: string;\n};\n\nconst useLabeledDatumStyles = makeStyles({\n  tooltipLabel: {\n    textDecorationLine: \"underline\",\n    textDecorationColor: \"#a6c3e3\",\n    textDecorationThickness: \"1px\",\n    textDecorationStyle: \"dotted\",\n    cursor: \"help\",\n  },\n});\n\nconst LabeledDatum: React.FC<LabeledDatumProps> = ({\n  label,\n  datum,\n  tooltip,\n}) => {\n  const classes = useLabeledDatumStyles();\n  const innerHtml = (\n    <Grid container item xs={12}>\n      <Grid item xs={6}>\n        <Box className={tooltip && classes.tooltipLabel}>{label}</Box>\n      </Grid>\n      <Grid item xs={6}>\n        <span>{datum}</span>\n      </Grid>\n    </Grid>\n  );\n  return tooltip ? <Tooltip title={tooltip}>{innerHtml}</Tooltip> : innerHtml;\n};\n\nexport default LabeledDatum;\n","import { createStyles, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst blend = (\n  [r1, g1, b1]: number[],\n  [r2, g2, b2]: number[],\n  ratio: number,\n) => [\n  r1 * (1 - ratio) + r2 * ratio,\n  g1 * (1 - ratio) + g2 * ratio,\n  b1 * (1 - ratio) + b2 * ratio,\n];\n\nconst useUsageBarStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderColor: theme.palette.divider,\n      borderStyle: \"solid\",\n      borderWidth: 1,\n      display: \"flex\",\n      flexGrow: 1,\n    },\n    inner: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1),\n    },\n  }),\n);\n\ntype UsageBarProps = {\n  percent: number;\n  text: string;\n};\n\nconst UsageBar: React.FC<UsageBarProps> = ({ percent, text }) => {\n  const classes = useUsageBarStyles();\n  const safePercent = Math.max(Math.min(percent, 100), 0);\n  const minColor = [0, 255, 0];\n  const maxColor = [255, 0, 0];\n\n  const leftColor = minColor;\n  const rightColor = blend(minColor, maxColor, safePercent / 100);\n  const alpha = 0.2;\n\n  const gradient = `\n    linear-gradient(\n      to right,\n      rgba(${leftColor.join(\",\")}, ${alpha}) 0%,\n      rgba(${rightColor.join(\",\")}, ${alpha}) ${safePercent}%,\n      transparent ${safePercent}%\n    )\n  `;\n\n  // Use a nested `span` here because the right border is affected by the\n  // gradient background otherwise.\n  return (\n    <span className={classes.root}>\n      <span\n        className={classes.inner}\n        style={{ background: gradient, flexGrow: 1 }}\n      >\n        <Typography align=\"center\">{text}</Typography>\n      </span>\n    </span>\n  );\n};\n\nexport default UsageBar;\n","import {\n  createStyles,\n  makeStyles,\n  Theme,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { ActorState } from \"../../../api\";\n\ntype ActorStateReprProps = {\n  state: ActorState;\n  showTooltip?: boolean;\n  variant?: any;\n};\n\nconst {\n  Alive,\n  Dead,\n  PendingCreation,\n  Restarting,\n  DependenciesUnready,\n  Infeasible,\n  PendingResources,\n} = ActorState;\n\nconst useActorStateReprStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    infeasible: {\n      color: theme.palette.error.light,\n    },\n    pendingResources: {\n      color: theme.palette.warning.light,\n    },\n    unknown: {\n      color: theme.palette.warning.light,\n    },\n    creating: {\n      color: theme.palette.success.light,\n    },\n    alive: {\n      color: theme.palette.success.dark,\n    },\n    restarting: {\n      color: theme.palette.warning.light,\n    },\n    dead: {\n      color: \"#cccccc\",\n    },\n    tooltip: {\n      cursor: \"help\",\n    },\n  }),\n);\nconst infeasibleTooltip =\n  \"The actor cannot be created because of insufficient resources in the cluster. Please examine its resource constraints to make sure they are correct or add additional compute to your cluster.\";\nconst pendingResourcesTooltip =\n  \"The actor is pending resources, such as GPU, Memory, or CPU. It will be created when they become available.\";\nconst aliveTooltip = \"The actor is alive and handling remote calls.\";\nconst deadTooltip = \"The actor is dead and will not be restarted anymore.\";\nconst restartingTooltip = \"The actor died and is restarting.\";\nconst pendingCreationTooltip =\n  \"The actor's resources and other dependencies are ready, and the Ray backend is processing its creation.\";\nconst dependenciesUnreadyTooltip =\n  \"The actor is pending creation because it is waiting for one or more of its initialization arguments to be ready.\";\n\nconst stateToTooltip = {\n  [Alive]: aliveTooltip,\n  [Dead]: deadTooltip,\n  [Infeasible]: infeasibleTooltip,\n  [Restarting]: restartingTooltip,\n  [PendingCreation]: pendingCreationTooltip,\n  [DependenciesUnready]: dependenciesUnreadyTooltip,\n  [PendingResources]: pendingResourcesTooltip,\n};\n\nconst ActorStateRepr: React.FC<ActorStateReprProps> = ({\n  state,\n  variant,\n  showTooltip,\n}) => {\n  const classes = useActorStateReprStyles();\n  const variantOrDefault = variant ?? \"body1\";\n  let body;\n  switch (state) {\n    case Infeasible:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.infeasible}>\n          Infeasible\n        </Typography>\n      );\n      break;\n    case PendingResources:\n      body = (\n        <Typography\n          variant={variantOrDefault}\n          className={classes.pendingResources}\n        >\n          Pending Resources\n        </Typography>\n      );\n      break;\n    case PendingCreation:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.creating}>\n          Creating\n        </Typography>\n      );\n      break;\n    case DependenciesUnready:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.creating}>\n          Dependencies Unready\n        </Typography>\n      );\n      break;\n    case Alive:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.alive}>\n          Alive\n        </Typography>\n      );\n      break;\n    case Restarting:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.restarting}>\n          Restarting\n        </Typography>\n      );\n      break;\n    case Dead:\n      body = (\n        <Typography variant={variantOrDefault} className={classes.dead}>\n          Dead\n        </Typography>\n      );\n      break;\n  }\n  return showTooltip ? (\n    <Tooltip className={classes.tooltip} title={stateToTooltip[state]}>\n      {body}\n    </Tooltip>\n  ) : (\n    body\n  );\n};\n\nexport default ActorStateRepr;\n","import {\n  Divider,\n  Grid,\n  makeStyles,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { ActorInfo, isFullActorInfo } from \"../../../api\";\nimport LabeledDatum from \"../../../common/LabeledDatum\";\nimport UsageBar from \"../../../common/UsageBar\";\nimport { sum } from \"../../../common/util\";\nimport ActorStateRepr from \"./ActorStateRepr\";\n\nconst memoryDebuggingDocLink =\n  \"https://docs.ray.io/en/master/memory-management.html#debugging-using-ray-memory\";\n\ntype ActorDatum = {\n  label: string;\n  value: any;\n  tooltip?: string;\n};\n\nconst labeledActorData = (actor: ActorInfo) =>\n  isFullActorInfo(actor)\n    ? [\n        {\n          label: \"Resources\",\n          value:\n            actor.usedResources &&\n            Object.entries(actor.usedResources).length > 0 &&\n            Object.entries(actor.usedResources)\n              .sort((a, b) => a[0].localeCompare(b[0]))\n              .map(\n                ([key, value]) =>\n                  `${sum(\n                    value.resourceSlots.map((slot) => slot.allocation),\n                  )} ${key}`,\n              )\n              .join(\", \"),\n        },\n        {\n          label: \"Number of pending tasks\",\n          value: actor.taskQueueLength?.toLocaleString() ?? \"0\",\n          tooltip:\n            \"The number of tasks that are currently pending to execute on this actor. If this number \" +\n            \"remains consistently high, it may indicate that this actor is a bottleneck in your application.\",\n        },\n        {\n          label: \"Number of executed tasks\",\n          value: actor.numExecutedTasks?.toLocaleString() ?? \"0\",\n          tooltip:\n            \"The number of tasks this actor has executed throughout its lifetimes.\",\n        },\n        {\n          label: \"Number of ObjectRefs in scope\",\n          value: actor.numObjectRefsInScope?.toLocaleString() ?? \"0\",\n          tooltip:\n            \"The number of ObjectRefs that this actor is keeping in scope via its internal state. \" +\n            \"This does not imply that the objects are in active use or colocated on the node with the actor \" +\n            `currently. This can be useful for debugging memory leaks. See the docs at ${memoryDebuggingDocLink} ` +\n            \"for more information.\",\n        },\n        {\n          label: \"Number of local objects\",\n          value: actor.numLocalObjects?.toLocaleString() ?? \"0\",\n          tooltip:\n            \"The number of small objects that this actor has stored in its local in-process memory store. This can be useful for \" +\n            `debugging memory leaks. See the docs at ${memoryDebuggingDocLink} for more information`,\n        },\n        {\n          label: \"Object store memory used (MiB)\",\n          value: actor.usedObjectStoreMemory?.toLocaleString() ?? \"0\",\n          tooltip:\n            \"The total amount of memory that this actor is occupying in the Ray object store. \" +\n            \"If this number is increasing without bounds, you might have a memory leak. See \" +\n            `the docs at: ${memoryDebuggingDocLink} for more information.`,\n        },\n      ]\n    : [\n        {\n          label: \"Actor ID\",\n          value: actor.actorId,\n          tooltip: \"\",\n        },\n        {\n          label: \"Required resources\",\n          value:\n            actor.requiredResources &&\n            Object.entries(actor.requiredResources).length > 0 &&\n            Object.entries(actor.requiredResources)\n              .sort((a, b) => a[0].localeCompare(b[0]))\n              .map(([key, value]) => `${value.toLocaleString()} ${key}`)\n              .join(\", \"),\n          tooltip: \"\",\n        },\n      ];\n\ntype ActorDetailsPaneProps = {\n  actor: ActorInfo;\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  divider: {\n    width: \"100%\",\n    margin: \"0 auto\",\n  },\n  actorTitleWrapper: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n    fontWeight: \"bold\",\n    fontSize: \"130%\",\n  },\n  detailsPane: {\n    margin: theme.spacing(1),\n  },\n}));\n\nconst ActorDetailsPane: React.FC<ActorDetailsPaneProps> = ({ actor }) => {\n  const classes = useStyles();\n  const actorData: ActorDatum[] = labeledActorData(actor);\n  return (\n    <React.Fragment>\n      <div className={classes.actorTitleWrapper}>\n        <div>{actor.actorClass}</div>\n        <ActorStateRepr state={actor.state} />\n      </div>\n      {isFullActorInfo(actor) && (\n        <Grid container spacing={3} className={classes.detailsPane}>\n          <Grid container item xs={6}>\n            <Grid item xs={4}>\n              <Typography>CPU Usage</Typography>\n            </Grid>\n            <Grid item xs={4}>\n              <UsageBar\n                percent={actor.processStats?.cpuPercent ?? 0}\n                text={`${actor.processStats?.cpuPercent ?? 0}%`}\n              />\n            </Grid>\n            <Grid item xs={4} />\n          </Grid>\n          {actor.gpus.length > 0 && (\n            <Grid container item xs={6}>\n              <Grid item xs={12}>\n                <Typography>GPU Usage</Typography>\n              </Grid>\n              {actor.gpus.map((gpu) => {\n                const gpuUtilization = gpu.utilizationGpu ? (\n                  <UsageBar\n                    percent={gpu.utilizationGpu * 100}\n                    text={`${gpu.utilizationGpu * 100}%`}\n                  />\n                ) : (\n                  <Typography\n                    color=\"textSecondary\"\n                    component=\"span\"\n                    variant=\"inherit\"\n                  >\n                    N/A\n                  </Typography>\n                );\n                return (\n                  <React.Fragment key={gpu.uuid}>\n                    <Grid item xs={4}>\n                      {`[${gpu.name}]`}\n                    </Grid>\n                    <Grid item xs={4}>\n                      {gpuUtilization}\n                    </Grid>\n                    <Grid item xs={4} />\n                  </React.Fragment>\n                );\n              })}\n            </Grid>\n          )}\n        </Grid>\n      )}\n      <Divider className={classes.divider} />\n      <Grid container className={classes.detailsPane}>\n        {actorData.map(\n          ({ label, value, tooltip }) =>\n            value &&\n            value.length > 0 && (\n              <LabeledDatum\n                key={label}\n                label={label}\n                datum={value}\n                tooltip={tooltip}\n              />\n            ),\n        )}\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default ActorDetailsPane;\n","import { createStyles, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport {\n  ActorInfo,\n  ActorState,\n  checkProfilingStatus,\n  CheckProfilingStatusResponse,\n  getProfilingResultURL,\n  isFullActorInfo,\n  launchKillActor,\n  launchProfiling,\n} from \"../../../api\";\nimport ActorDetailsPane from \"./ActorDetailsPane\";\n\nconst useActorStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      borderColor: theme.palette.divider,\n      borderStyle: \"solid\",\n      borderWidth: 1,\n      marginTop: theme.spacing(2),\n      padding: theme.spacing(2),\n      width: \"100%\",\n    },\n    title: {\n      color: theme.palette.text.secondary,\n      fontSize: \"0.75rem\",\n    },\n    action: {\n      color: theme.palette.primary.main,\n      textDecoration: \"none\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n    infeasible: {\n      color: theme.palette.error.main,\n    },\n    pendingResources: {\n      color: theme.palette.secondary.main,\n    },\n\n    webuiDisplay: {\n      fontSize: \"0.875rem\",\n    },\n    inlineHTML: {\n      fontSize: \"0.875rem\",\n      display: \"inline\",\n    },\n  }),\n);\n\ntype ActorProps = {\n  actor: ActorInfo;\n};\n\ntype profilingInfo = {\n  [profilingId: string]: {\n    startTime: number;\n    latestResponse: CheckProfilingStatusResponse | null;\n  };\n};\n\nconst Actor: React.FC<ActorProps> = ({ actor }) => {\n  const [profiling, setProfiling] = useState<profilingInfo>({});\n  const classes = useActorStyles();\n\n  const handleProfilingClick = (duration: number) => async () => {\n    if (actor.state === ActorState.Alive) {\n      const profilingId = await launchProfiling(\n        actor.nodeId,\n        actor.pid,\n        duration,\n      );\n      setProfiling({\n        ...profiling,\n        [profilingId]: { startTime: Date.now(), latestResponse: null },\n      });\n      const checkProfilingStatusLoop = async () => {\n        const response = await checkProfilingStatus(profilingId);\n        setProfiling({\n          ...profiling,\n          [profilingId]: {\n            ...profiling[profilingId],\n            latestResponse: response,\n          },\n        });\n        if (response.status === \"pending\") {\n          setTimeout(checkProfilingStatusLoop, 1000);\n        }\n      };\n      await checkProfilingStatusLoop();\n    }\n  };\n\n  const killActor = () => {\n    if (actor.state === ActorState.Alive) {\n      launchKillActor(actor.actorId, actor.ipAddress, actor.port);\n    }\n  };\n\n  // Construct the custom message from the actor.\n  let actorCustomDisplay: JSX.Element[] = [];\n  if (isFullActorInfo(actor) && actor.webuiDisplay) {\n    actorCustomDisplay = Object.keys(actor.webuiDisplay)\n      .sort()\n      .map((key, _, __) => {\n        // Construct the value from actor.\n        // Please refer to worker.py::show_in_webui for schema.\n        const valueEncoded = actor.webuiDisplay![key];\n        const valueParsed = JSON.parse(valueEncoded);\n        let valueRendered = valueParsed[\"message\"];\n        if (valueParsed[\"dtype\"] === \"html\") {\n          valueRendered = (\n            <div\n              className={classes.inlineHTML}\n              dangerouslySetInnerHTML={{ __html: valueRendered }}\n            ></div>\n          );\n        }\n\n        if (key === \"\") {\n          return (\n            <Typography className={classes.webuiDisplay}>\n              &nbsp; &nbsp; {valueRendered}\n            </Typography>\n          );\n        } else {\n          return (\n            <Typography className={classes.webuiDisplay}>\n              &nbsp; &nbsp; {key}: {valueRendered}\n            </Typography>\n          );\n        }\n      });\n  }\n\n  return (\n    <div className={classes.root}>\n      <Typography className={classes.title}>\n        {isFullActorInfo(actor) ? (\n          <React.Fragment>\n            Actor {actor.actorId} (Profile for\n            {[10, 30, 60].map((duration) => (\n              <React.Fragment key={duration}>\n                {\" \"}\n                <span\n                  className={classes.action}\n                  onClick={handleProfilingClick(duration)}\n                >\n                  {duration}s\n                </span>\n              </React.Fragment>\n            ))}\n            ){\" \"}\n            {actor.state === ActorState.Alive && (\n              <span className={classes.action} onClick={killActor}>\n                Kill Actor\n              </span>\n            )}\n            {Object.entries(profiling).map(\n              ([profilingId, { startTime, latestResponse }]) =>\n                latestResponse !== null && (\n                  <React.Fragment key={profilingId}>\n                    (\n                    {latestResponse.status === \"pending\" ? (\n                      `Profiling for ${Math.round(\n                        (Date.now() - startTime) / 1000,\n                      )}s...`\n                    ) : latestResponse.status === \"finished\" ? (\n                      <a\n                        className={classes.action}\n                        href={getProfilingResultURL(profilingId)}\n                        rel=\"noopener noreferrer\"\n                        target=\"_blank\"\n                      >\n                        Profiling result\n                      </a>\n                    ) : latestResponse.status === \"error\" ? (\n                      `Profiling error: ${latestResponse.error.trim()}`\n                    ) : undefined}\n                    ){\" \"}\n                  </React.Fragment>\n                ),\n            )}\n          </React.Fragment>\n        ) : actor.state === ActorState.Infeasible ? (\n          <span className={classes.infeasible}>\n            {actor.actorClass} cannot be created because the Ray cluster cannot\n            satisfy its resource requirements.\n          </span>\n        ) : (\n          <span className={classes.pendingResources}>\n            {actor.actorClass} is pending until resources are available.\n          </span>\n        )}\n      </Typography>\n      <ActorDetailsPane actor={actor} />\n      {isFullActorInfo(actor) && (\n        <React.Fragment>\n          {actorCustomDisplay.length > 0 && (\n            <React.Fragment>{actorCustomDisplay}</React.Fragment>\n          )}\n        </React.Fragment>\n      )}\n    </div>\n  );\n};\n\nexport default Actor;\n","import {\n  Box,\n  createStyles,\n  Grid,\n  makeStyles,\n  Paper,\n  styled,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { ActorGroup, ActorState } from \"../../../api\";\nimport { Expander, Minimizer } from \"../../../common/ExpandControls\";\nimport LabeledDatum from \"../../../common/LabeledDatum\";\nimport Actor from \"./Actor\";\nimport ActorStateRepr from \"./ActorStateRepr\";\n\nconst asSeconds = (n: number) => `${n}s`;\nconst CenteredBox = styled(Box)({\n  textAlign: \"center\",\n});\n\nconst useActorClassGroupStyles = makeStyles((theme) =>\n  createStyles({\n    container: {\n      margin: theme.spacing(1),\n      padding: theme.spacing(1),\n      marginLeft: theme.spacing(2),\n    },\n    title: {\n      margin: theme.spacing(1),\n    },\n    actorEntry: {\n      width: \"100%\",\n    },\n  }),\n);\n\ntype ActorClassGroupProps = {\n  title: string;\n  actorGroup: ActorGroup;\n};\n\nconst ActorClassGroup: React.FC<ActorClassGroupProps> = ({\n  actorGroup,\n  title,\n}) => {\n  const classes = useActorClassGroupStyles();\n  const [expanded, setExpanded] = useState(false);\n  const toggleExpanded = () => setExpanded(!expanded);\n  const entries = actorGroup.entries.map((actor, i) => (\n    <Box\n      component=\"div\"\n      className={classes.actorEntry}\n      key={actor.actorId ?? i}\n    >\n      <Actor actor={actor} />\n    </Box>\n  ));\n  const { Alive, PendingResources, Infeasible } = ActorState;\n  const summary = actorGroup.summary;\n  return (\n    <Paper className={classes.container}>\n      <Box display=\"block\" className={classes.title}>\n        <Typography variant=\"h5\">{title}</Typography>\n      </Box>\n      <Grid container xs={12} spacing={2}>\n        <Grid container item xs={5} className={classes.title}>\n          {Infeasible in summary.stateToCount && (\n            <LabeledDatum\n              label={\n                <ActorStateRepr\n                  state={Infeasible}\n                  variant=\"body1\"\n                  showTooltip={true}\n                />\n              }\n              datum={summary.stateToCount[Infeasible]}\n            />\n          )}\n          <LabeledDatum\n            label={\n              <ActorStateRepr\n                state={Alive}\n                variant=\"body1\"\n                showTooltip={true}\n              />\n            }\n            datum={\n              Alive in summary.stateToCount ? summary.stateToCount[Alive] : 0\n            }\n          />\n\n          <LabeledDatum\n            label={\n              <ActorStateRepr\n                state={PendingResources}\n                variant=\"body1\"\n                showTooltip={true}\n              />\n            }\n            datum={\n              PendingResources in summary.stateToCount\n                ? summary.stateToCount[PendingResources]\n                : 0\n            }\n          />\n        </Grid>\n        <Grid container item xs={5} className={classes.title}>\n          <LabeledDatum\n            label={\"Mean Lifetime\"}\n            datum={asSeconds(summary.avgLifetime)}\n          />\n          <LabeledDatum\n            label={\"Max Lifetime\"}\n            datum={asSeconds(summary.maxLifetime)}\n          />\n          <LabeledDatum\n            label={\"Executed Tasks\"}\n            datum={summary.numExecutedTasks}\n          />\n        </Grid>\n      </Grid>\n\n      {expanded ? (\n        <React.Fragment>\n          <Box>{entries}</Box>\n          <CenteredBox>\n            <Minimizer onClick={toggleExpanded} />\n          </CenteredBox>\n        </React.Fragment>\n      ) : (\n        <CenteredBox>\n          <Expander onClick={toggleExpanded} />\n        </CenteredBox>\n      )}\n    </Paper>\n  );\n};\n\nexport default ActorClassGroup;\n","import { Snackbar } from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\nimport React, { useState } from \"react\";\nimport { ActorGroup, ActorState } from \"../../../api\";\nimport { stableSort } from \"../../../common/tableUtils\";\n\nimport { sum } from \"../../../common/util\";\nimport ActorClassGroup from \"./ActorClassGroup\";\n\ntype ActorClassGroupsProps = {\n  actorGroups: { [groupKey: string]: ActorGroup };\n};\n\nconst ActorClassGroups: React.FC<ActorClassGroupsProps> = ({ actorGroups }) => {\n  const numInfeasible = (group: ActorGroup) =>\n    group.summary.stateToCount[ActorState.Infeasible] ?? 0;\n  const totalInfeasible = sum(Object.values(actorGroups).map(numInfeasible));\n  const [warningOpen, setWarningOpen] = useState(totalInfeasible > 0);\n  const groupComparator = (\n    [title1, group1]: [string, ActorGroup],\n    [title2, group2]: [string, ActorGroup],\n  ) => {\n    const infeasible1 = numInfeasible(group1);\n    const infeasible2 = numInfeasible(group2);\n    if (infeasible1 !== infeasible2) {\n      return infeasible1 > infeasible2 ? -1 : 1;\n    }\n    return title1 > title2 ? 1 : -1;\n  };\n  const children = stableSort(\n    Object.entries(actorGroups),\n    groupComparator,\n  ).map(([title, actorGroup]) => (\n    <ActorClassGroup\n      actorGroup={actorGroup}\n      title={title}\n      key={`acg-${title}`}\n    />\n  ));\n\n  return (\n    <React.Fragment>\n      <Snackbar open={warningOpen}>\n        <Alert severity=\"warning\" onClose={() => setWarningOpen(false)}>\n          There are one or more actors that cannot currently be created due to\n          insufficient cluster resources. These have been sorted to the top of\n          the list. If you are using autoscaling functionality, you may ignore\n          this message.\n        </Alert>\n      </Snackbar>\n      {children}\n    </React.Fragment>\n  );\n};\n\nexport default ActorClassGroups;\n","import {\n  Box,\n  createStyles,\n  FormControl,\n  FormHelperText,\n  Input,\n  InputLabel,\n  makeStyles,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useDebounce } from \"use-debounce\";\nimport { StoreState } from \"../../../store\";\nimport ActorClassGroups from \"./ActorClassGroups\";\n\nconst useLogicalViewStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      marginBottom: theme.spacing(1),\n    },\n  }),\n);\n\nconst actorClassMatchesSearch = (\n  actorClass: string,\n  nameFilter: string,\n): boolean => {\n  const loweredNameFilter = nameFilter.toLowerCase();\n  return actorClass.toLowerCase().search(loweredNameFilter) !== -1;\n};\n\nconst actorGroupsSelector = (state: StoreState) => state.dashboard.actorGroups;\n\nconst LogicalView: React.FC = () => {\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [debouncedNameFilter] = useDebounce(nameFilter, 500);\n  const classes = useLogicalViewStyles();\n  const actorGroups = useSelector(actorGroupsSelector);\n  if (!actorGroups) {\n    return <Typography color=\"textSecondary\">Loading...</Typography>;\n  }\n  if (Object.keys(actorGroups).length === 0) {\n    return (\n      <Typography color=\"textSecondary\">\n        Finished loading, but have found no actors yet.\n      </Typography>\n    );\n  }\n  const filteredGroups =\n    debouncedNameFilter === \"\"\n      ? Object.entries(actorGroups)\n      : Object.entries(actorGroups).filter(([key, _]) =>\n          actorClassMatchesSearch(key, debouncedNameFilter),\n        );\n  return (\n    <Box className={classes.container}>\n      {filteredGroups.length === 0 ? (\n        <Typography color=\"textSecondary\">No actors found.</Typography>\n      ) : (\n        <React.Fragment>\n          <FormControl>\n            <InputLabel htmlFor=\"actor-name-filter\">Actor Search</InputLabel>\n            <Input\n              id=\"actor-name-filter\"\n              aria-describedby=\"actor-name-helper-text\"\n              value={nameFilter}\n              onChange={(event) => setNameFilter(event.target.value)}\n            />\n            <FormHelperText id=\"actor-name-helper-text\">\n              Search for an actor by name\n            </FormHelperText>\n          </FormControl>\n          <ActorClassGroups actorGroups={Object.fromEntries(filteredGroups)} />\n        </React.Fragment>\n      )}\n    </Box>\n  );\n};\n\nexport default LogicalView;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport {\n  ActorGroup,\n  ActorsResponse,\n  MemoryTable,\n  MemoryTableResponse,\n  NodeInfoResponse,\n  RayConfigResponse,\n  TuneAvailability,\n  TuneAvailabilityResponse,\n  TuneJob,\n  TuneJobResponse,\n} from \"../../api\";\n\nconst name = \"dashboard\";\n\ntype State = {\n  tab: number;\n  rayConfig: RayConfigResponse | null;\n  nodeInfo: NodeInfoResponse | null;\n  actorGroups: { [key: string]: ActorGroup } | null;\n  tuneInfo: TuneJob | null;\n  tuneAvailability: TuneAvailability | null;\n  lastUpdatedAt: number | null;\n  error: string | null;\n  memoryTable: MemoryTable | null;\n  shouldObtainMemoryTable: boolean;\n};\n\nconst initialState: State = {\n  actorGroups: null,\n  tab: 0,\n  rayConfig: null,\n  nodeInfo: null,\n  tuneInfo: null,\n  tuneAvailability: null,\n  lastUpdatedAt: null,\n  error: null,\n  memoryTable: null,\n  shouldObtainMemoryTable: false,\n};\n\nconst slice = createSlice({\n  name,\n  initialState,\n  reducers: {\n    setTab: (state, action: PayloadAction<number>) => {\n      state.tab = action.payload;\n    },\n    setRayConfig: (state, action: PayloadAction<RayConfigResponse>) => {\n      state.rayConfig = action.payload;\n    },\n    setNodeInfo: (\n      state,\n      action: PayloadAction<{\n        nodeInfo: NodeInfoResponse;\n      }>,\n    ) => {\n      state.nodeInfo = action.payload.nodeInfo;\n      state.lastUpdatedAt = Date.now();\n    },\n    setActorGroups: (state, action: PayloadAction<ActorsResponse>) => {\n      state.actorGroups = action.payload.actorGroups;\n    },\n    setTuneInfo: (state, action: PayloadAction<TuneJobResponse>) => {\n      state.tuneInfo = action.payload.result;\n      state.lastUpdatedAt = Date.now();\n    },\n    setTuneAvailability: (\n      state,\n      action: PayloadAction<TuneAvailabilityResponse>,\n    ) => {\n      state.tuneAvailability = action.payload.result;\n      state.lastUpdatedAt = Date.now();\n    },\n    setError: (state, action: PayloadAction<string | null>) => {\n      state.error = action.payload;\n    },\n    setMemoryTable: (state, action: PayloadAction<MemoryTableResponse>) => {\n      state.memoryTable = action.payload.memoryTable;\n    },\n    setShouldObtainMemoryTable: (state, action: PayloadAction<boolean>) => {\n      state.shouldObtainMemoryTable = action.payload;\n    },\n  },\n});\n\nexport const dashboardActions = slice.actions;\nexport const dashboardReducer = slice.reducer;\n","export const formatByteAmount = (\n  amount: number,\n  unit: \"mebibyte\" | \"gibibyte\",\n) =>\n  `${(\n    amount / (unit === \"mebibyte\" ? Math.pow(1024, 2) : Math.pow(1024, 3))\n  ).toFixed(1)} ${unit === \"mebibyte\" ? \"MiB\" : \"GiB\"}`;\n\nexport const formatUsage = (\n  used_b: number,\n  total_b: number,\n  unit: \"mebibyte\" | \"gibibyte\",\n  includePercentage: boolean,\n) => {\n  const usedFormatted = formatByteAmount(used_b, unit);\n  const totalFormatted = formatByteAmount(total_b, unit);\n  const percent = (100 * used_b) / total_b;\n  const ratioStr = `${usedFormatted} / ${totalFormatted}`;\n  if (includePercentage) {\n    return `${ratioStr} (${percent.toFixed(0)}%)`;\n  }\n  return ratioStr;\n};\n\n// Formats, e.g. 400 and 6000 as \"400 MiB / 6000 MiB (6.7%)\"\nexport const MiBRatio = (used: number, total: number) =>\n  `${used} MiB / ${total} MiB (${(100 * (used / total)).toFixed(1)}%)`;\n\nexport const MiBRatioNoPercent = (used: number, total: number) =>\n  `${used} MiB / ${total} MiB`;\n\nexport const formatDuration = (durationInSeconds: number) => {\n  const durationSeconds = Math.floor(durationInSeconds) % 60;\n  const durationMinutes = Math.floor(durationInSeconds / 60) % 60;\n  const durationHours = Math.floor(durationInSeconds / 60 / 60) % 24;\n  const durationDays = Math.floor(durationInSeconds / 60 / 60 / 24);\n  const pad = (value: number) => value.toString().padStart(2, \"0\");\n  return [\n    durationDays ? `${durationDays}d` : \"\",\n    `${pad(durationHours)}h`,\n    `${pad(durationMinutes)}m`,\n    `${pad(durationSeconds)}s`,\n  ].join(\" \");\n};\n\nexport const formatValue = (rawFloat: number) => {\n  try {\n    const decimals = rawFloat.toString().split(\".\")[1].length || 0;\n    if (decimals <= 3) {\n      return rawFloat.toString();\n    } // Few decimals\n    if (Math.abs(rawFloat.valueOf()) >= 1.0) {\n      return rawFloat.toPrecision(5);\n    } // Values >= 1\n    return rawFloat.toExponential(); // Values in (-1; 1)\n  } catch (e) {\n    return rawFloat.toString();\n  }\n};\n","import { createStyles, Grid, makeStyles, Theme } from \"@material-ui/core\";\nimport React from \"react\";\nimport { MemoryTableSummary } from \"../../../api\";\nimport { formatByteAmount } from \"../../../common/formatUtils\";\nimport LabeledDatum from \"../../../common/LabeledDatum\";\n\nconst useMemorySummaryStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    expandCollapseIcon: {\n      color: theme.palette.text.secondary,\n      fontSize: \"1.5em\",\n      verticalAlign: \"middle\",\n    },\n    container: {\n      padding: theme.spacing(1),\n      margin: theme.spacing(1),\n    },\n  }),\n);\n\ntype MemorySummaryProps = {\n  memoryTableSummary: MemoryTableSummary;\n  initialExpanded: boolean;\n};\n\nconst MemorySummary: React.FC<MemorySummaryProps> = ({\n  memoryTableSummary,\n}) => {\n  const classes = useMemorySummaryStyles();\n  const memoryData = [\n    [\"Total Local Reference Count\", `${memoryTableSummary.totalLocalRefCount}`],\n    [\"Pinned in Memory Count\", `${memoryTableSummary.totalPinnedInMemory}`],\n    [\n      \"Total Used by Pending Tasks Count\",\n      `${memoryTableSummary.totalUsedByPendingTask}`,\n    ],\n    [\n      \"Total Captured in Objects Count\",\n      `${memoryTableSummary.totalCapturedInObjects}`,\n    ],\n    [\n      \"Total Memory Used by Objects\",\n      `${formatByteAmount(memoryTableSummary.totalObjectSize, \"mebibyte\")}`,\n    ],\n    [\"Total Actor Handle Count\", `${memoryTableSummary.totalActorHandles}`],\n  ];\n\n  return (\n    <Grid container className={classes.container}>\n      {memoryData.map(([label, value]) => (\n        <LabeledDatum key={label} label={label} datum={value} />\n      ))}\n    </Grid>\n  );\n};\nexport default MemorySummary;\n","import { TableCell } from \"@material-ui/core\";\nimport { styled } from \"@material-ui/core/styles\";\n\nexport const StyledTableCell = styled(TableCell)(({ theme }) => ({\n  padding: theme.spacing(1),\n  textAlign: \"center\",\n}));\n\nexport const ExpandableStyledTableCell = styled(TableCell)(({ theme }) => ({\n  padding: theme.spacing(1),\n  textAlign: \"center\",\n  cursor: \"pointer\",\n}));\n","import {\n  createStyles,\n  makeStyles,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  Theme,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { StyledTableCell } from \"./TableCell\";\nimport { Order } from \"./tableUtils\";\n\nconst useSortableTableHeadStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    visuallyHidden: {\n      border: 0,\n      clip: \"rect(0 0 0 0)\",\n      height: 1,\n      margin: -1,\n      overflow: \"hidden\",\n      padding: 0,\n      position: \"absolute\",\n      top: 20,\n      width: 1,\n    },\n  }),\n);\n\nexport type HeaderInfo<T> = {\n  sortable: boolean;\n  id: T;\n  label: string;\n  numeric: boolean;\n};\n\ntype SortableTableHeadProps<T> = {\n  onRequestSort: (event: React.MouseEvent<unknown>, id: T) => void;\n  order: Order;\n  orderBy: T | null;\n  headerInfo: HeaderInfo<T>[];\n  firstColumnEmpty: boolean;\n};\n\nconst SortableTableHead = <T,>(props: SortableTableHeadProps<T>) => {\n  const { order, orderBy, onRequestSort, headerInfo, firstColumnEmpty } = props;\n  const classes = useSortableTableHeadStyles();\n  const createSortHandler = (id: T) => (event: React.MouseEvent<unknown>) => {\n    onRequestSort(event, id);\n  };\n  return (\n    <TableHead>\n      <TableRow>\n        {firstColumnEmpty && <StyledTableCell />}\n        {headerInfo.map((headerInfo) => {\n          if (headerInfo.sortable) {\n            return (\n              <StyledTableCell\n                key={headerInfo.label}\n                align={headerInfo.numeric ? \"right\" : \"left\"}\n                sortDirection={orderBy === headerInfo.id ? order : false}\n              >\n                <TableSortLabel\n                  active={orderBy === headerInfo.id}\n                  direction={orderBy === headerInfo.id ? order : \"asc\"}\n                  onClick={createSortHandler(headerInfo.id)}\n                >\n                  {headerInfo.label}\n                  {orderBy === headerInfo.id ? (\n                    <span className={classes.visuallyHidden}>\n                      {order === \"desc\"\n                        ? \"sorted descending\"\n                        : \"sorted ascending\"}\n                    </span>\n                  ) : null}\n                </TableSortLabel>\n              </StyledTableCell>\n            );\n          } else {\n            return (\n              <StyledTableCell\n                key={headerInfo.label}\n                align={headerInfo.numeric ? \"right\" : \"left\"}\n              >\n                {headerInfo.label}\n              </StyledTableCell>\n            );\n          }\n        })}\n      </TableRow>\n    </TableHead>\n  );\n};\n\nexport default SortableTableHead;\n","import { TableRow } from \"@material-ui/core\";\nimport React from \"react\";\nimport { MemoryTableEntry } from \"../../../api\";\nimport { formatByteAmount } from \"../../../common/formatUtils\";\nimport { StyledTableCell } from \"../../../common/TableCell\";\n\ntype Props = {\n  memoryTableEntry: MemoryTableEntry;\n};\n\nexport const MemoryTableRow = (props: Props) => {\n  const { memoryTableEntry } = props;\n  const object_size =\n    memoryTableEntry.objectSize === -1\n      ? \"?\"\n      : formatByteAmount(memoryTableEntry.objectSize, \"mebibyte\");\n  const memoryTableEntryValues = [\n    memoryTableEntry.nodeIpAddress,\n    memoryTableEntry.pid,\n    memoryTableEntry.type,\n    memoryTableEntry.objectRef,\n    object_size,\n    memoryTableEntry.referenceType,\n    memoryTableEntry.callSite,\n  ];\n  return (\n    <TableRow hover>\n      {memoryTableEntryValues.map((value, index) => (\n        <StyledTableCell key={`${index}`}>{value}</StyledTableCell>\n      ))}\n    </TableRow>\n  );\n};\n","import {\n  createStyles,\n  makeStyles,\n  Paper,\n  Table,\n  TableBody,\n  Theme,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { MemoryTableEntry } from \"../../../api\";\nimport SortableTableHead, {\n  HeaderInfo,\n} from \"../../../common/SortableTableHead\";\nimport { getComparator, Order, stableSort } from \"../../../common/tableUtils\";\n\nimport { MemoryTableRow } from \"./MemoryTableRow\";\n\nconst useMemoryTableStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      margin: theme.spacing(1),\n      padding: theme.spacing(1),\n    },\n    cell: {\n      padding: theme.spacing(1),\n      textAlign: \"center\",\n    },\n  }),\n);\n\ntype memoryColumnId =\n  | \"nodeIpAddress\"\n  | \"pid\"\n  | \"type\"\n  | \"objectRef\"\n  | \"objectSize\"\n  | \"referenceType\"\n  | \"callSite\";\n\nconst memoryHeaderInfo: HeaderInfo<memoryColumnId>[] = [\n  {\n    id: \"nodeIpAddress\",\n    label: \"IP Address\",\n    numeric: false,\n    sortable: true,\n  },\n  { id: \"pid\", label: \"PID\", numeric: false, sortable: true },\n  { id: \"type\", label: \"Type\", numeric: false, sortable: true },\n  { id: \"objectRef\", label: \"Object Ref\", numeric: false, sortable: true },\n  {\n    id: \"objectSize\",\n    label: \"Object Size\",\n    numeric: false,\n    sortable: true,\n  },\n  {\n    id: \"referenceType\",\n    label: \"Reference Type\",\n    numeric: false,\n    sortable: true,\n  },\n  { id: \"callSite\", label: \"Call Site\", numeric: false, sortable: true },\n];\n\ntype MemoryTableProps = {\n  tableEntries: MemoryTableEntry[];\n};\n\nconst MemoryTable: React.FC<MemoryTableProps> = ({ tableEntries }) => {\n  const toggleOrder = () => setOrder(order === \"asc\" ? \"desc\" : \"asc\");\n  const classes = useMemoryTableStyles();\n  const [order, setOrder] = React.useState<Order>(\"asc\");\n  const [orderBy, setOrderBy] = React.useState<memoryColumnId | null>(null);\n  const comparator = orderBy && getComparator(order, orderBy);\n  const sortedTableEntries = comparator\n    ? stableSort(tableEntries, comparator)\n    : tableEntries;\n  const tableRows = sortedTableEntries.map((tableEntry) => (\n    <MemoryTableRow memoryTableEntry={tableEntry} key={tableEntry.objectRef} />\n  ));\n  // Todo(max) add in sorting code\n  return (\n    <Paper className={classes.container} elevation={2}>\n      <Table>\n        <SortableTableHead\n          orderBy={orderBy}\n          order={order}\n          onRequestSort={(_, property) => {\n            if (property === orderBy) {\n              toggleOrder();\n            } else {\n              setOrderBy(property);\n              setOrder(\"asc\");\n            }\n          }}\n          headerInfo={memoryHeaderInfo}\n          firstColumnEmpty={false}\n        />\n        <TableBody>{tableRows}</TableBody>\n      </Table>\n    </Paper>\n  );\n};\n\nexport default MemoryTable;\n","import {\n  Box,\n  createStyles,\n  makeStyles,\n  Paper,\n  styled,\n  Theme,\n} from \"@material-ui/core\";\nimport React, { ReactChild, useState } from \"react\";\nimport { MemoryTableEntry, MemoryTableSummary } from \"../../../api\";\nimport { Expander, Minimizer } from \"../../../common/ExpandControls\";\nimport MemorySummary from \"./MemorySummary\";\nimport MemoryTable from \"./MemoryTable\";\n\nconst CenteredBox = styled(Box)({\n  textAlign: \"center\",\n});\n\nconst useMemoryRowGroupStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n      paddingTop: theme.spacing(2),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n    },\n  }),\n);\n\ntype MemoryRowGroupProps = {\n  groupKey: string;\n  groupTitle: ReactChild;\n  summary: MemoryTableSummary;\n  entries: MemoryTableEntry[];\n  initialExpanded: boolean;\n  initialVisibleEntries: number;\n};\n\nconst MemoryRowGroup: React.FC<MemoryRowGroupProps> = ({\n  groupKey,\n  groupTitle,\n  entries,\n  summary,\n  initialExpanded,\n  initialVisibleEntries,\n}) => {\n  const classes = useMemoryRowGroupStyles();\n  const [expanded, setExpanded] = useState(initialExpanded);\n  const [numVisibleEntries, setNumVisibleEntries] = useState(\n    initialVisibleEntries,\n  );\n  const toggleExpanded = () => setExpanded(!expanded);\n  const showMoreEntries = () => setNumVisibleEntries(numVisibleEntries + 10);\n  const visibleEntries = entries.slice(0, numVisibleEntries);\n  return (\n    <Paper key={groupKey} className={classes.container}>\n      {groupTitle}\n      <MemorySummary initialExpanded={false} memoryTableSummary={summary} />\n      {expanded ? (\n        <React.Fragment>\n          <MemoryTable tableEntries={visibleEntries} />\n          <CenteredBox>\n            {entries.length > numVisibleEntries && (\n              <Expander onClick={showMoreEntries} />\n            )}\n            <Minimizer onClick={toggleExpanded} />\n          </CenteredBox>\n        </React.Fragment>\n      ) : (\n        <CenteredBox>\n          <Expander onClick={toggleExpanded} />\n        </CenteredBox>\n      )}\n    </Paper>\n  );\n};\n\nexport default MemoryRowGroup;\n","import {\n  Box,\n  Button,\n  CircularProgress,\n  createStyles,\n  FormControl,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  Select,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport PauseIcon from \"@material-ui/icons/Pause\";\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\nimport SubdirectoryArrowRightIcon from \"@material-ui/icons/SubdirectoryArrowRight\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  getMemoryTable,\n  MemoryGroupByKey,\n  MemoryTable,\n  MemoryTableResponse,\n  setMemoryTableCollection,\n} from \"../../../api\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\nimport MemoryRowGroup from \"./MemoryRowGroup\";\n\nconst groupTitle = (groupKey: string, groupBy: MemoryGroupByKey) => {\n  if (groupBy === \"node\") {\n    return <Typography variant=\"h6\">{`Node ${groupKey}`}</Typography>;\n  }\n  if (groupBy === \"stack_trace\") {\n    return <PyStackTrace stackTrace={groupKey} />;\n  }\n  if (groupBy === \"\") {\n    return <Typography variant=\"h6\">All entries</Typography>;\n  }\n  return <Typography variant=\"h6\">Unknown Group</Typography>;\n};\n\nconst PyStackTrace: React.FC<{ stackTrace: string }> = ({ stackTrace }) => {\n  const stackFrames = stackTrace.split(\" | \");\n  const renderedFrames = stackFrames.map((frame, i) => (\n    <Typography\n      variant={i === 0 ? \"h6\" : \"subtitle2\"}\n      style={{ marginLeft: `${i}em` }}\n      key={i}\n    >\n      {i !== 0 && <SubdirectoryArrowRightIcon />}\n      {frame}\n    </Typography>\n  ));\n  return <Box>{renderedFrames}</Box>;\n};\n\nconst MEMORY_POLLING_INTERVAL_MS = 4000;\n\nconst useMemoryInfoStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    pauseButton: {\n      margin: theme.spacing(1),\n      padding: theme.spacing(1),\n      float: \"right\",\n    },\n    select: {\n      minWidth: \"7em\",\n    },\n  }),\n);\n\nconst memoryTableSelector = (state: StoreState) => state.dashboard.memoryTable;\nconst isEmpty = (memoryTable: MemoryTable) =>\n  Object.keys(memoryTable.group).length === 0;\nconst loadTimerComplete = (mountedAt: Date) => {\n  const secondsBetween = Math.abs(\n    (new Date().getTime() - mountedAt.getTime()) / 1000,\n  );\n  return secondsBetween > 10;\n};\n\nconst fetchMemoryTable = (\n  groupByKey: MemoryGroupByKey,\n  setResults: (mtr: MemoryTableResponse) => void,\n) => {\n  return async () => {\n    const resp = await getMemoryTable(groupByKey);\n    setResults(resp);\n  };\n};\n\nconst MemoryInfo: React.FC<{}> = () => {\n  const memoryTable = useSelector(memoryTableSelector);\n  const dispatch = useDispatch();\n  const mountedAt = new Date();\n  const [paused, setPaused] = useState(false);\n  const pauseButtonIcon = paused ? <PlayArrowIcon /> : <PauseIcon />;\n\n  const classes = useMemoryInfoStyles();\n  const [groupBy, setGroupBy] = useState<MemoryGroupByKey>(\"node\");\n\n  // Turn memory collection on render\n  useEffect(() => {\n    setMemoryTableCollection(true);\n    return () => {\n      setMemoryTableCollection(false);\n    };\n  }, []);\n\n  // Set up polling memory data\n  const fetchData = useCallback(\n    fetchMemoryTable(groupBy, (resp) =>\n      dispatch(dashboardActions.setMemoryTable(resp)),\n    ),\n    [groupBy],\n  );\n  const intervalId = useRef<any>(null);\n  useEffect(() => {\n    if (!intervalId.current && !paused) {\n      fetchData();\n      intervalId.current = setInterval(fetchData, MEMORY_POLLING_INTERVAL_MS);\n    }\n    const cleanup = () => {\n      if (intervalId.current) {\n        clearInterval(intervalId.current);\n        intervalId.current = null;\n      }\n    };\n    return cleanup;\n  }, [paused, fetchData, dispatch]);\n\n  if (!memoryTable || (isEmpty(memoryTable) && !loadTimerComplete(mountedAt))) {\n    return (\n      <Typography align=\"center\" color=\"textSecondary\" variant=\"h3\">\n        <CircularProgress /> Loading\n      </Typography>\n    );\n  }\n  if (isEmpty(memoryTable) && loadTimerComplete(mountedAt)) {\n    return (\n      <Typography align=\"center\" color=\"textSecondary\" variant=\"h3\">\n        Finished loading, but nothing found.\n      </Typography>\n    );\n  }\n\n  const children = Object.entries(memoryTable.group)\n    .sort(([key1], [key2]) => (key1 < key2 ? -1 : 1))\n    .map(([groupKey, memoryGroup]) => (\n      <MemoryRowGroup\n        key={groupKey}\n        groupKey={groupKey}\n        groupTitle={groupTitle(groupKey, groupBy)}\n        entries={memoryGroup.entries}\n        summary={memoryGroup.summary}\n        initialExpanded={false}\n        initialVisibleEntries={10}\n      />\n    ));\n  return (\n    <Box>\n      <FormControl>\n        <InputLabel shrink id=\"group-by-label\">\n          Group by\n        </InputLabel>\n        <Select\n          labelId=\"group-by-label\"\n          value={groupBy}\n          className={classes.select}\n          onChange={(e: any) => setGroupBy(e.target.value)}\n          color=\"primary\"\n          displayEmpty\n        >\n          <MenuItem value=\"\">\n            <em>None</em>\n          </MenuItem>\n          <MenuItem value={\"node\"}>Node IP Address</MenuItem>\n          <MenuItem value={\"stack_trace\"}>Stack Trace</MenuItem>\n        </Select>\n      </FormControl>\n      <Button\n        color=\"primary\"\n        className={classes.pauseButton}\n        onClick={() => {\n          if (intervalId.current) {\n            clearInterval(intervalId.current);\n            intervalId.current = null;\n          }\n          setMemoryTableCollection(!paused);\n          setPaused(!paused);\n        }}\n      >\n        {pauseButtonIcon}\n        {paused ? \"Resume Collection\" : \"Pause Collection\"}\n      </Button>\n      {children}\n    </Box>\n  );\n};\n\nexport default MemoryInfo;\n","import {\n  createStyles,\n  Dialog,\n  IconButton,\n  Theme,\n  Typography,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport React from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    paper: {\n      padding: theme.spacing(3),\n    },\n    closeButton: {\n      position: \"absolute\",\n      right: theme.spacing(1.5),\n      top: theme.spacing(1.5),\n      zIndex: 1,\n    },\n    title: {\n      borderBottomColor: theme.palette.divider,\n      borderBottomStyle: \"solid\",\n      borderBottomWidth: 1,\n      fontSize: \"1.5rem\",\n      lineHeight: 1,\n      marginBottom: theme.spacing(3),\n      paddingBottom: theme.spacing(3),\n    },\n  });\n\ntype Props = {\n  handleClose: () => void;\n  title: string;\n};\n\nclass DialogWithTitle extends React.Component<\n  Props & WithStyles<typeof styles>\n> {\n  render() {\n    const { classes, handleClose, title } = this.props;\n    return (\n      <Dialog\n        classes={{ paper: classes.paper }}\n        fullWidth\n        maxWidth=\"md\"\n        onClose={handleClose}\n        open\n        scroll=\"body\"\n      >\n        <IconButton className={classes.closeButton} onClick={handleClose}>\n          <CloseIcon />\n        </IconButton>\n        <Typography className={classes.title}>{title}</Typography>\n        {this.props.children}\n      </Dialog>\n    );\n  }\n}\n\nexport default withStyles(styles)(DialogWithTitle);\n","import {\n  createStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport React from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      overflowX: \"auto\",\n    },\n    cell: {\n      borderWidth: 0,\n      fontFamily: \"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace\",\n      padding: 0,\n      \"&:last-child\": {\n        paddingRight: 0,\n      },\n    },\n    lineNumber: {\n      color: theme.palette.text.secondary,\n      paddingRight: theme.spacing(2),\n      textAlign: \"right\",\n      verticalAlign: \"top\",\n      width: \"1%\",\n      // Use a ::before pseudo-element for the line number so that it won't\n      // interact with user selections or searching.\n      \"&::before\": {\n        content: \"attr(data-line-number)\",\n      },\n    },\n    line: {\n      textAlign: \"left\",\n      whiteSpace: \"pre-wrap\",\n    },\n  });\n\ntype Props = {\n  lines: string[];\n};\n\nclass NumberedLines extends React.Component<Props & WithStyles<typeof styles>> {\n  render() {\n    const { classes, lines } = this.props;\n    return (\n      <Table>\n        <TableBody>\n          {lines.map((line, index) => (\n            <TableRow key={index}>\n              <TableCell\n                className={classNames(classes.cell, classes.lineNumber)}\n                data-line-number={index + 1}\n              />\n              <TableCell className={classNames(classes.cell, classes.line)}>\n                {line}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    );\n  }\n}\n\nexport default withStyles(styles)(NumberedLines);\n","import {\n  createStyles,\n  fade,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { ErrorsByPid, getErrors } from \"../../../../../api\";\nimport DialogWithTitle from \"../../../../../common/DialogWithTitle\";\nimport NumberedLines from \"../../../../../common/NumberedLines\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    header: {\n      lineHeight: 1,\n      marginBottom: theme.spacing(3),\n      marginTop: theme.spacing(3),\n    },\n    error: {\n      backgroundColor: fade(theme.palette.error.main, 0.04),\n      borderLeftColor: theme.palette.error.main,\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: 2,\n      marginTop: theme.spacing(3),\n      padding: theme.spacing(2),\n    },\n    timestamp: {\n      color: theme.palette.text.secondary,\n      marginBottom: theme.spacing(1),\n    },\n  });\n\ntype Props = {\n  clearErrorDialog: () => void;\n  nodeIp: string;\n  pid: number | null;\n};\n\ntype State = {\n  result: ErrorsByPid | null;\n  error: string | null;\n};\n\nclass Errors extends React.Component<Props & WithStyles<typeof styles>, State> {\n  state: State = {\n    result: null,\n    error: null,\n  };\n\n  async componentDidMount() {\n    try {\n      const { nodeIp, pid } = this.props;\n      const result = await getErrors(nodeIp, pid);\n      this.setState({ result: result.errors, error: null });\n    } catch (error) {\n      this.setState({ result: null, error: error.toString() });\n    }\n  }\n\n  render() {\n    const { classes, clearErrorDialog, nodeIp } = this.props;\n    const { result, error } = this.state;\n\n    return (\n      <DialogWithTitle handleClose={clearErrorDialog} title=\"Errors\">\n        {error !== null ? (\n          <Typography color=\"error\">{error}</Typography>\n        ) : result === null ? (\n          <Typography color=\"textSecondary\">Loading...</Typography>\n        ) : (\n          Object.entries(result).map(([pid, errors]) => (\n            <React.Fragment key={pid}>\n              <Typography className={classes.header}>\n                {nodeIp} (PID: {pid})\n              </Typography>\n              {errors.length > 0 ? (\n                errors.map(({ message, timestamp }, index) => (\n                  <div className={classes.error} key={index}>\n                    <Typography className={classes.timestamp}>\n                      Error at {new Date(timestamp * 1000).toLocaleString()}\n                    </Typography>\n                    <NumberedLines lines={message.trim().split(\"\\n\")} />\n                  </div>\n                ))\n              ) : (\n                <Typography color=\"textSecondary\">No errors found.</Typography>\n              )}\n            </React.Fragment>\n          ))\n        )}\n      </DialogWithTitle>\n    );\n  }\n}\n\nexport default withStyles(styles)(Errors);\n","import {\n  createStyles,\n  fade,\n  Theme,\n  Typography,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { getLogs, LogsByPid } from \"../../../../../api\";\nimport DialogWithTitle from \"../../../../../common/DialogWithTitle\";\nimport NumberedLines from \"../../../../../common/NumberedLines\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    header: {\n      lineHeight: 1,\n      marginBottom: theme.spacing(3),\n      marginTop: theme.spacing(3),\n    },\n    log: {\n      backgroundColor: fade(theme.palette.primary.main, 0.04),\n      borderLeftColor: theme.palette.primary.main,\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: 2,\n      padding: theme.spacing(2),\n    },\n  });\n\ntype Props = {\n  clearLogDialog: () => void;\n  nodeIp: string;\n  pid: number | null;\n};\n\ntype State = {\n  result: LogsByPid | null;\n  error: string | null;\n};\n\nclass Logs extends React.Component<Props & WithStyles<typeof styles>, State> {\n  state: State = {\n    result: null,\n    error: null,\n  };\n\n  async componentDidMount() {\n    try {\n      const { nodeIp, pid } = this.props;\n      const result = await getLogs(nodeIp, pid);\n      this.setState({ result: result.logs, error: null });\n    } catch (error) {\n      this.setState({ result: null, error: error.toString() });\n    }\n  }\n\n  render() {\n    const { classes, clearLogDialog, nodeIp } = this.props;\n    const { result, error } = this.state;\n\n    return (\n      <DialogWithTitle handleClose={clearLogDialog} title=\"Logs\">\n        {error !== null ? (\n          <Typography color=\"error\">{error}</Typography>\n        ) : result === null ? (\n          <Typography color=\"textSecondary\">Loading...</Typography>\n        ) : (\n          Object.entries(result).map(([pid, lines]) => (\n            <React.Fragment key={pid}>\n              <Typography className={classes.header}>\n                {nodeIp} (PID: {pid})\n              </Typography>\n              {lines.length > 0 ? (\n                <div className={classes.log}>\n                  <NumberedLines lines={lines} />\n                </div>\n              ) : (\n                <Typography color=\"textSecondary\">No logs found.</Typography>\n              )}\n            </React.Fragment>\n          ))\n        )}\n      </DialogWithTitle>\n    );\n  }\n}\n\nexport default withStyles(styles)(Logs);\n","import React from \"react\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport UsageBar from \"../../../../common/UsageBar\";\nimport { getWeightedAverage } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterCPU: ClusterFeatureRenderFn = ({ nodes }) => {\n  const cpuWeightedAverage = getWeightedAverage(\n    nodes.map((node) => ({ weight: node.cpus[0], value: node.cpu })),\n  );\n  return (\n    <div style={{ minWidth: 60 }}>\n      <UsageBar\n        percent={cpuWeightedAverage}\n        text={`${cpuWeightedAverage.toFixed(1)}%`}\n      />\n    </div>\n  );\n};\n\nexport const NodeCPU: NodeFeatureRenderFn = ({ node }) => (\n  <div style={{ minWidth: 60 }}>\n    <UsageBar percent={node.cpu} text={`${node.cpu.toFixed(1)}%`} />\n  </div>\n);\nexport const nodeCPUAccessor: Accessor<NodeFeatureData> = ({ node }) => {\n  return node.cpu;\n};\n\nexport const WorkerCPU: WorkerFeatureRenderFn = ({ worker }) => (\n  <div style={{ minWidth: 60 }}>\n    <UsageBar\n      percent={worker.cpuPercent}\n      text={`${worker.cpuPercent.toFixed(1)}%`}\n    />\n  </div>\n);\n\nexport const workerCPUAccessor: Accessor<WorkerFeatureData> = ({ worker }) => {\n  return worker.cpuPercent;\n};\n\nconst cpuFeature: NodeInfoFeature = {\n  id: \"cpu\",\n  ClusterFeatureRenderFn: ClusterCPU,\n  NodeFeatureRenderFn: NodeCPU,\n  WorkerFeatureRenderFn: WorkerCPU,\n  nodeAccessor: nodeCPUAccessor,\n  workerAccessor: workerCPUAccessor,\n};\n\nexport default cpuFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { formatUsage } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport UsageBar from \"../../../../common/UsageBar\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterDisk: ClusterFeatureRenderFn = ({ nodes }) => {\n  let used = 0;\n  let total = 0;\n  for (const node of nodes) {\n    if (\"/\" in node.disk) {\n      used += node.disk[\"/\"].used;\n      total += node.disk[\"/\"].total;\n    }\n  }\n  return (\n    <UsageBar\n      percent={(100 * used) / total}\n      text={formatUsage(used, total, \"gibibyte\", true)}\n    />\n  );\n};\n\nexport const NodeDisk: NodeFeatureRenderFn = ({ node }) => (\n  <UsageBar\n    percent={(100 * node.disk[\"/\"].used) / node.disk[\"/\"].total}\n    text={formatUsage(\n      node.disk[\"/\"].used,\n      node.disk[\"/\"].total,\n      \"gibibyte\",\n      true,\n    )}\n  />\n);\n\nexport const nodeDiskAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.disk[\"/\"].used;\n\nexport const WorkerDisk: WorkerFeatureRenderFn = () => (\n  <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n    N/A\n  </Typography>\n);\n\nconst diskFeature: NodeInfoFeature = {\n  id: \"disk\",\n  ClusterFeatureRenderFn: ClusterDisk,\n  NodeFeatureRenderFn: NodeDisk,\n  WorkerFeatureRenderFn: WorkerDisk,\n  nodeAccessor: nodeDiskAccessor,\n};\n\nexport default diskFeature;\n","import { createStyles, Theme, withStyles, WithStyles } from \"@material-ui/core\";\nimport React, { HTMLAttributes } from \"react\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    button: {\n      color: theme.palette.primary.main,\n      \"&:hover\": {\n        cursor: \"pointer\",\n        textDecoration: \"underline\",\n      },\n    },\n  });\n\nclass SpanButton extends React.Component<\n  HTMLAttributes<HTMLSpanElement> & WithStyles<typeof styles>\n> {\n  render() {\n    const { classes, ...otherProps } = this.props;\n    return <span className={classes.button} {...otherProps} />;\n  }\n}\n\nexport default withStyles(styles)(SpanButton);\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport SpanButton from \"../../../../common/SpanButton\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport { sum } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nconst ClusterErrors: ClusterFeatureRenderFn = ({ nodes }) => {\n  const totalErrCount = sum(nodes.map((node) => node.errorCount ?? 0));\n  return totalErrCount === 0 ? (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No errors\n    </Typography>\n  ) : (\n    <React.Fragment>\n      {totalErrCount.toLocaleString()}{\" \"}\n      {totalErrCount === 1 ? \"error\" : \"errors\"}\n    </React.Fragment>\n  );\n};\n\nconst makeNodeErrors = (\n  setErrorDialog: (nodeIp: string, pid: number | null) => void,\n): NodeFeatureRenderFn => ({ node }) => {\n  const errorCount = node.errorCount ?? 0;\n  return errorCount === 0 ? (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No errors\n    </Typography>\n  ) : (\n    <SpanButton onClick={() => setErrorDialog(node.ip, null)}>\n      View all errors ({errorCount.toLocaleString()})\n    </SpanButton>\n  );\n};\n\nconst nodeErrorsAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.errorCount ?? 0;\n\nconst makeWorkerErrors = (\n  setErrorDialog: (nodeIp: string, pid: number | null) => void,\n): WorkerFeatureRenderFn => ({ node, worker }) => {\n  return worker.errorCount !== 0 ? (\n    <SpanButton onClick={() => setErrorDialog(node.ip, worker.pid)}>\n      View errors ({worker.errorCount?.toLocaleString()})\n    </SpanButton>\n  ) : (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No errors\n    </Typography>\n  );\n};\n\nconst workerErrorsAccessor: Accessor<WorkerFeatureData> = ({ worker }) =>\n  worker.errorCount ?? 0;\n\nconst makeErrorsFeature = (\n  setErrorDialog: (nodeIp: string, pid: number | null) => void,\n): NodeInfoFeature => ({\n  id: \"errors\",\n  ClusterFeatureRenderFn: ClusterErrors,\n  WorkerFeatureRenderFn: makeWorkerErrors(setErrorDialog),\n  NodeFeatureRenderFn: makeNodeErrors(setErrorDialog),\n  nodeAccessor: nodeErrorsAccessor,\n  workerAccessor: workerErrorsAccessor,\n});\n\nexport default makeErrorsFeature;\n","import { styled, Typography } from \"@material-ui/core\";\n\nexport const RightPaddedTypography = styled(Typography)(({ theme }) => ({\n  paddingRight: theme.spacing(1),\n}));\n","import { Box, Tooltip, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { GPUStats, ResourceSlot, Worker } from \"../../../../api\";\nimport { RightPaddedTypography } from \"../../../../common/CustomTypography\";\nimport { Accessor } from \"../../../../common/tableUtils\";\n\nimport UsageBar from \"../../../../common/UsageBar\";\nimport { getWeightedAverage, sum } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  Node,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nconst GPU_COL_WIDTH = 120;\n\nconst clusterGPUUtilization = (nodes: Array<Node>): number => {\n  const utils = nodes\n    .map((node) => ({\n      weight: node.gpus.length,\n      value: nodeGPUUtilization(node),\n    }))\n    .filter((util) => !isNaN(util.value));\n  if (utils.length === 0) {\n    return NaN;\n  }\n  return getWeightedAverage(utils);\n};\n\nconst nodeGPUUtilization = (node: Node): number => {\n  if (node.gpus === null) {\n    return NaN;\n  }\n  const gpusWithUtilInfo = node.gpus.filter((gpu) => gpu.utilizationGpu);\n  if (gpusWithUtilInfo.length === 0) {\n    return NaN;\n  }\n\n  const utilizationSum = sum(\n    gpusWithUtilInfo.map((gpu) => gpu.utilizationGpu ?? 0),\n  );\n  const avgUtilization = utilizationSum / gpusWithUtilInfo.length;\n  return avgUtilization;\n};\n\nconst nodeGPUAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  nodeGPUUtilization(node);\n\nconst ClusterGPU: ClusterFeatureRenderFn = ({ nodes }) => {\n  const clusterAverageUtilization = clusterGPUUtilization(nodes);\n  return (\n    <div style={{ minWidth: GPU_COL_WIDTH }}>\n      {isNaN(clusterAverageUtilization) ? (\n        <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n          N/A\n        </Typography>\n      ) : (\n        <UsageBar\n          percent={clusterAverageUtilization}\n          text={`${clusterAverageUtilization.toFixed(1)}%`}\n        />\n      )}\n    </div>\n  );\n};\n\nconst NodeGPU: NodeFeatureRenderFn = ({ node }) => {\n  const hasGPU = node.gpus !== undefined && node.gpus.length !== 0;\n  return (\n    <div style={{ minWidth: GPU_COL_WIDTH }}>\n      {hasGPU ? (\n        node.gpus.map((gpu, i) => <NodeGPUEntry gpu={gpu} slot={i} />)\n      ) : (\n        <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n          N/A\n        </Typography>\n      )}\n    </div>\n  );\n};\n\ntype NodeGPUEntryProps = {\n  slot: number;\n  gpu: GPUStats;\n};\n\nconst NodeGPUEntry: React.FC<NodeGPUEntryProps> = ({ gpu, slot }) => {\n  return (\n    <Box display=\"flex\" style={{ minWidth: GPU_COL_WIDTH }}>\n      <Tooltip title={gpu.name}>\n        <RightPaddedTypography variant=\"body1\">[{slot}]:</RightPaddedTypography>\n      </Tooltip>\n      {gpu.utilizationGpu ? (\n        <UsageBar\n          percent={gpu.utilizationGpu}\n          text={`${gpu.utilizationGpu.toFixed(1)}%`}\n        />\n      ) : (\n        <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n          N/A\n        </Typography>\n      )}\n    </Box>\n  );\n};\n\ntype WorkerGPUEntryProps = {\n  resourceSlot: ResourceSlot;\n};\n\nconst WorkerGPUEntry: React.FC<WorkerGPUEntryProps> = ({ resourceSlot }) => {\n  const { allocation, slot } = resourceSlot;\n  // This is a bit of  a dirty hack . For some reason, the slot GPU slot\n  // 0 as assigned always shows up as undefined in the API response.\n  // There are other times, such as a partial allocation, where we truly don't\n  // know the slot, however this will just plug the hole of 0s coming through\n  // as undefined. I have not been able to figure out the root cause.\n  const slotMsg =\n    allocation >= 1 && slot === undefined\n      ? \"0\"\n      : slot === undefined\n      ? \"?\"\n      : slot.toString();\n  return (\n    <Typography variant=\"body1\">\n      [{slotMsg}]: {allocation}\n    </Typography>\n  );\n};\n\nconst WorkerGPU: WorkerFeatureRenderFn = ({ worker }) => {\n  const workerRes = worker.coreWorkerStats[0]?.usedResources;\n  const workerUsedGPUResources = workerRes?.[\"GPU\"];\n  let message;\n  if (workerUsedGPUResources === undefined) {\n    message = (\n      <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n        N/A\n      </Typography>\n    );\n  } else {\n    message = workerUsedGPUResources.resourceSlots\n      .sort((slot1, slot2) => {\n        if (slot1.slot === undefined && slot2.slot === undefined) {\n          return 0;\n        } else if (slot1.slot === undefined) {\n          return 1;\n        } else if (slot2.slot === undefined) {\n          return -1;\n        } else {\n          return slot1.slot - slot2.slot;\n        }\n      })\n      .map((resourceSlot) => <WorkerGPUEntry resourceSlot={resourceSlot} />);\n  }\n  return <div style={{ minWidth: 60 }}>{message}</div>;\n};\n\nconst workerGPUUtilization = (worker: Worker | null) => {\n  const workerRes = worker?.coreWorkerStats[0]?.usedResources;\n  const workerUsedGPUResources = workerRes?.[\"GPU\"];\n  return (\n    workerUsedGPUResources &&\n    sum(\n      workerUsedGPUResources.resourceSlots.map(\n        (resourceSlot) => resourceSlot.allocation,\n      ),\n    )\n  );\n};\n\nconst workerGPUAccessor: Accessor<WorkerFeatureData> = ({ worker }) => {\n  return workerGPUUtilization(worker) ?? 0;\n};\n\nconst gpuFeature: NodeInfoFeature = {\n  id: \"gpu\",\n  ClusterFeatureRenderFn: ClusterGPU,\n  NodeFeatureRenderFn: NodeGPU,\n  WorkerFeatureRenderFn: WorkerGPU,\n  nodeAccessor: nodeGPUAccessor,\n  workerAccessor: workerGPUAccessor,\n};\n\nexport default gpuFeature;\n","import { Box, Tooltip, Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { GPUStats } from \"../../../../api\";\nimport { RightPaddedTypography } from \"../../../../common/CustomTypography\";\nimport { MiBRatioNoPercent } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport UsageBar from \"../../../../common/UsageBar\";\nimport { getWeightedAverage, sum } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  Node,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nconst GRAM_COL_WIDTH = 120;\n\nconst nodeGRAMUtilization = (node: Node) => {\n  const utilization = (gpu: GPUStats) => {\n    if (!gpu.memoryUsed || !gpu.memoryTotal) {\n      return NaN;\n    }\n    return gpu.memoryUsed / gpu.memoryTotal;\n  };\n  const gramUtils = node.gpus.map(utilization).filter((util) => !!util);\n  if (gramUtils.length === 0) {\n    return NaN;\n  }\n  const utilizationSum = sum(node.gpus.map((gpu) => utilization(gpu)));\n  const avgUtilization = utilizationSum / node.gpus.length;\n  // Convert to a percent before returning\n  return avgUtilization * 100;\n};\n\nconst nodeGRAMAccessor: Accessor<NodeFeatureData> = ({ node }) => {\n  const nodeGRAMUtil = nodeGRAMUtilization(node);\n  return isNaN(nodeGRAMUtil) ? -1 : nodeGRAMUtil;\n};\n\nconst clusterGRAMUtilization = (nodes: Array<Node>) => {\n  const utils = nodes\n    .map((node) => ({\n      weight: node.gpus.length,\n      value: nodeGRAMUtilization(node),\n    }))\n    .filter((util) => !isNaN(util.value));\n  if (utils.length === 0) {\n    return NaN;\n  }\n  return getWeightedAverage(utils);\n};\n\nexport const ClusterGRAM: ClusterFeatureRenderFn = ({ nodes }) => {\n  const clusterAverageUtilization = clusterGRAMUtilization(nodes);\n  return (\n    <div style={{ minWidth: 60 }}>\n      {isNaN(clusterAverageUtilization) ? (\n        <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n          N/A\n        </Typography>\n      ) : (\n        <UsageBar\n          percent={clusterAverageUtilization}\n          text={`${clusterAverageUtilization.toFixed(1)}%`}\n        />\n      )}\n    </div>\n  );\n};\n\nexport const NodeGRAM: NodeFeatureRenderFn = ({ node }) => {\n  const nodeGRAMEntries = node.gpus.map((gpu, i) => {\n    const props = {\n      gpuName: gpu.name,\n      utilization: gpu.memoryUsed,\n      total: gpu.memoryTotal,\n      slot: i,\n    };\n    return <GRAMEntry {...props} />;\n  });\n  return (\n    <div style={{ minWidth: 60 }}>\n      {nodeGRAMEntries.length === 0 ? (\n        <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n          N/A\n        </Typography>\n      ) : (\n        <div style={{ minWidth: GRAM_COL_WIDTH }}>{nodeGRAMEntries}</div>\n      )}\n    </div>\n  );\n};\n\ntype GRAMEntryProps = {\n  gpuName: string;\n  slot: number;\n  utilization: number;\n  total: number;\n};\n\nconst GRAMEntry: React.FC<GRAMEntryProps> = ({\n  gpuName,\n  slot,\n  utilization,\n  total,\n}) => {\n  const ratioStr = MiBRatioNoPercent(utilization, total);\n  return (\n    <Box display=\"flex\" style={{ minWidth: GRAM_COL_WIDTH }}>\n      <Tooltip title={gpuName}>\n        <RightPaddedTypography variant=\"body1\">\n          [{slot}]: {ratioStr}\n        </RightPaddedTypography>\n      </Tooltip>\n    </Box>\n  );\n};\n\nexport const WorkerGRAM: WorkerFeatureRenderFn = ({ worker, node }) => {\n  const workerGRAMEntries = node.gpus\n    .map((gpu, i) => {\n      const process = gpu.processes.find(\n        (process) => process.pid === worker.pid,\n      );\n      if (!process) {\n        return undefined;\n      }\n      const props = {\n        gpuName: gpu.name,\n        total: gpu.memoryTotal,\n        utilization: process.gpuMemoryUsage,\n        slot: i,\n      };\n      return <GRAMEntry {...props} />;\n    })\n    .filter((entry) => entry !== undefined);\n\n  return workerGRAMEntries.length === 0 ? (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      N/A\n    </Typography>\n  ) : (\n    <div style={{ minWidth: GRAM_COL_WIDTH }}>{workerGRAMEntries}</div>\n  );\n};\n\nconst workerGRAMUtilization = (worker: any, node: Node) => {\n  const workerProcessPerGPU = node.gpus\n    .map((gpu) => gpu.processes)\n    .map((processes) =>\n      processes.find((process) => process.pid === worker.pid),\n    );\n  const workerUtilPerGPU = workerProcessPerGPU.map(\n    (proc) => proc?.gpuMemoryUsage || 0,\n  );\n  return sum(workerUtilPerGPU);\n};\n\nconst workerGRAMAccessor: Accessor<WorkerFeatureData> = ({ worker, node }) => {\n  if (node.gpus.length === 0) {\n    return -1;\n  }\n  return workerGRAMUtilization(worker, node);\n};\n\nconst gramFeature: NodeInfoFeature = {\n  id: \"gram\",\n  ClusterFeatureRenderFn: ClusterGRAM,\n  NodeFeatureRenderFn: NodeGRAM,\n  WorkerFeatureRenderFn: WorkerGRAM,\n  nodeAccessor: nodeGRAMAccessor,\n  workerAccessor: workerGRAMAccessor,\n};\n\nexport default gramFeature;\n","import React from \"react\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterHost: ClusterFeatureRenderFn = ({ nodes }) => (\n  <React.Fragment>\n    Totals ({nodes.length.toLocaleString()}{\" \"}\n    {nodes.length === 1 ? \"host\" : \"hosts\"})\n  </React.Fragment>\n);\n\nexport const NodeHost: NodeFeatureRenderFn = ({ node }) => (\n  <React.Fragment>\n    {node.hostname} ({node.ip})\n  </React.Fragment>\n);\n\nexport const nodeHostAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.hostname;\n\n// Ray worker process titles have one of the following forms: `ray::IDLE`,\n// `ray::function()`, `ray::Class`, or `ray::Class.method()`. We extract the\n// first portion here for display in the \"Host\" column. Note that this will\n// always be `ray` under the current setup, but it may vary in the future.\nexport const WorkerHost: WorkerFeatureRenderFn = ({ worker }) => (\n  <React.Fragment>\n    {worker.cmdline[0].split(\"::\", 2)[0]} (PID: {worker.pid})\n  </React.Fragment>\n);\n\nconst hostFeature: NodeInfoFeature = {\n  id: \"host\",\n  ClusterFeatureRenderFn: ClusterHost,\n  NodeFeatureRenderFn: NodeHost,\n  WorkerFeatureRenderFn: WorkerHost,\n  nodeAccessor: nodeHostAccessor,\n};\n\nexport default hostFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport SpanButton from \"../../../../common/SpanButton\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport { sum } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nconst ClusterLogs: ClusterFeatureRenderFn = ({ nodes }) => {\n  const totalLogCount = sum(nodes.map((n) => n.logCount ?? 0));\n  return totalLogCount === 0 ? (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No logs\n    </Typography>\n  ) : (\n    <React.Fragment>\n      {totalLogCount.toLocaleString()} {totalLogCount === 1 ? \"line\" : \"lines\"}\n    </React.Fragment>\n  );\n};\n\nconst makeNodeLogs = (\n  setLogDialog: (nodeIp: string, pid: number | null) => void,\n): NodeFeatureRenderFn => ({ node }) => {\n  const logCount = node.logCount ?? 0;\n  return logCount === 0 ? (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No logs\n    </Typography>\n  ) : (\n    <SpanButton onClick={() => setLogDialog(node.ip, null)}>\n      View all logs ({logCount.toLocaleString()}{\" \"}\n      {node.logCount === 1 ? \"line\" : \"lines\"})\n    </SpanButton>\n  );\n};\n\nconst nodeLogsAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.logCount ? sum(Object.values(node.logCount)) : 0;\n\nconst makeWorkerLogs = (\n  setLogDialog: (nodeIp: string, pid: number | null) => void,\n): WorkerFeatureRenderFn => ({ worker, node }) => {\n  const logCount = worker.logCount ?? 0;\n  return logCount !== 0 ? (\n    <SpanButton onClick={() => setLogDialog(node.ip, worker.pid)}>\n      View log ({logCount.toLocaleString()}{\" \"}\n      {worker.logCount === 1 ? \"line\" : \"lines\"})\n    </SpanButton>\n  ) : (\n    <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n      No logs\n    </Typography>\n  );\n};\n\nconst workerLogsAccessor: Accessor<WorkerFeatureData> = ({ worker }) =>\n  worker.logCount ?? 0;\n\nconst makeLogsFeature = (\n  setLogDialog: (nodeIp: string, pid: number | null) => void,\n): NodeInfoFeature => ({\n  id: \"logs\",\n  ClusterFeatureRenderFn: ClusterLogs,\n  WorkerFeatureRenderFn: makeWorkerLogs(setLogDialog),\n  NodeFeatureRenderFn: makeNodeLogs(setLogDialog),\n  workerAccessor: workerLogsAccessor,\n  nodeAccessor: nodeLogsAccessor,\n});\n\nexport default makeLogsFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { formatUsage } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport UsageBar from \"../../../../common/UsageBar\";\nimport { sum } from \"../../../../common/util\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterObjectStoreMemory: ClusterFeatureRenderFn = ({ nodes }) => {\n  const totalAvailable = sum(\n    nodes.map((n) => n.raylet.objectStoreAvailableMemory),\n  );\n  const totalUsed = sum(nodes.map((n) => n.raylet.objectStoreUsedMemory));\n  const total = totalUsed + totalAvailable;\n  return (\n    <div style={{ minWidth: 60 }}>\n      <UsageBar\n        percent={100 * (totalUsed / total)}\n        text={formatUsage(totalUsed, total, \"mebibyte\", false)}\n      />\n    </div>\n  );\n};\n\nexport const NodeObjectStoreMemory: NodeFeatureRenderFn = ({ node }) => {\n  const totalAvailable = node.raylet.objectStoreAvailableMemory;\n  const used = node.raylet.objectStoreUsedMemory;\n  const total = totalAvailable + used;\n  if (used === undefined || totalAvailable === undefined || total === 0) {\n    return (\n      <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n        N/A\n      </Typography>\n    );\n  }\n  const usageRatio = used / total;\n  return (\n    <div style={{ minWidth: 60 }}>\n      <UsageBar\n        percent={usageRatio * 100}\n        text={formatUsage(used, total, \"mebibyte\", false)}\n      />\n    </div>\n  );\n};\n\nexport const nodeObjectStoreMemoryAccessor: Accessor<NodeFeatureData> = ({\n  node,\n}) => node.raylet.objectStoreUsedMemory;\n\nexport const WorkerObjectStoreMemory: WorkerFeatureRenderFn = () => (\n  <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n    N/A\n  </Typography>\n);\n\nexport const workerObjectStoreMemoryAccessor: Accessor<WorkerFeatureData> = () =>\n  0;\n\nconst objectStoreMemoryFeature: NodeInfoFeature = {\n  id: \"objectStoreMemory\",\n  ClusterFeatureRenderFn: ClusterObjectStoreMemory,\n  NodeFeatureRenderFn: NodeObjectStoreMemory,\n  WorkerFeatureRenderFn: WorkerObjectStoreMemory,\n  nodeAccessor: nodeObjectStoreMemoryAccessor,\n  workerAccessor: workerObjectStoreMemoryAccessor,\n};\n\nexport default objectStoreMemoryFeature;\n","import React from \"react\";\nimport { formatByteAmount, formatUsage } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport UsageBar from \"../../../../common/UsageBar\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterRAM: ClusterFeatureRenderFn = ({ nodes }) => {\n  let used = 0;\n  let total = 0;\n  for (const node of nodes) {\n    used += node.mem[0] - node.mem[1];\n    total += node.mem[0];\n  }\n  return (\n    <UsageBar\n      percent={(100 * used) / total}\n      text={formatUsage(used, total, \"gibibyte\", true)}\n    />\n  );\n};\n\nexport const NodeRAM: NodeFeatureRenderFn = ({ node }) => (\n  <UsageBar\n    percent={(100 * (node.mem[0] - node.mem[1])) / node.mem[0]}\n    text={formatUsage(node.mem[0] - node.mem[1], node.mem[0], \"gibibyte\", true)}\n  />\n);\n\nexport const nodeRAMAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  100 * (node.mem[0] - node.mem[1]);\n\nexport const WorkerRAM: WorkerFeatureRenderFn = ({ node, worker }) => (\n  <UsageBar\n    percent={(100 * worker.memoryInfo.rss) / node.mem[0]}\n    text={formatByteAmount(worker.memoryInfo.rss, \"mebibyte\")}\n  />\n);\n\nexport const workerRAMAccessor: Accessor<WorkerFeatureData> = ({ worker }) =>\n  worker.memoryInfo.rss;\n\nconst ramFeature: NodeInfoFeature = {\n  id: \"ram\",\n  ClusterFeatureRenderFn: ClusterRAM,\n  NodeFeatureRenderFn: NodeRAM,\n  WorkerFeatureRenderFn: WorkerRAM,\n  nodeAccessor: nodeRAMAccessor,\n  workerAccessor: workerRAMAccessor,\n};\n\nexport default ramFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { formatByteAmount } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterReceived: ClusterFeatureRenderFn = ({ nodes }) => {\n  let totalReceived = 0;\n  for (const node of nodes) {\n    totalReceived += node.net[1];\n  }\n  return (\n    <React.Fragment>\n      {formatByteAmount(totalReceived, \"mebibyte\")}/s\n    </React.Fragment>\n  );\n};\n\nexport const NodeReceived: NodeFeatureRenderFn = ({ node }) => (\n  <React.Fragment>{formatByteAmount(node.net[1], \"mebibyte\")}/s</React.Fragment>\n);\n\nexport const nodeReceivedAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.net[1];\n\nexport const WorkerReceived: WorkerFeatureRenderFn = () => (\n  <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n    N/A\n  </Typography>\n);\n\nconst receivedFeature: NodeInfoFeature = {\n  id: \"received\",\n  ClusterFeatureRenderFn: ClusterReceived,\n  NodeFeatureRenderFn: NodeReceived,\n  WorkerFeatureRenderFn: WorkerReceived,\n  nodeAccessor: nodeReceivedAccessor,\n};\n\nexport default receivedFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { formatByteAmount } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterSent: ClusterFeatureRenderFn = ({ nodes }) => {\n  let totalSent = 0;\n  for (const node of nodes) {\n    totalSent += node.net[0];\n  }\n  return (\n    <React.Fragment>{formatByteAmount(totalSent, \"mebibyte\")}/s</React.Fragment>\n  );\n};\n\nexport const NodeSent: NodeFeatureRenderFn = ({ node }) => (\n  <React.Fragment>{formatByteAmount(node.net[0], \"mebibyte\")}/s</React.Fragment>\n);\n\nexport const nodeSentAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  node.net[0];\n\nexport const WorkerSent: WorkerFeatureRenderFn = () => (\n  <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n    N/A\n  </Typography>\n);\n\nconst sentFeature: NodeInfoFeature = {\n  id: \"sent\",\n  ClusterFeatureRenderFn: ClusterSent,\n  NodeFeatureRenderFn: NodeSent,\n  WorkerFeatureRenderFn: WorkerSent,\n  nodeAccessor: nodeSentAccessor,\n};\n\nexport default sentFeature;\n","import { Typography } from \"@material-ui/core\";\nimport React from \"react\";\nimport { formatDuration } from \"../../../../common/formatUtils\";\nimport { Accessor } from \"../../../../common/tableUtils\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureData,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureData,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nconst getUptime = (bootTime: number) => Date.now() / 1000 - bootTime;\n\nexport const ClusterUptime: ClusterFeatureRenderFn = ({ nodes }) => (\n  <Typography color=\"textSecondary\" component=\"span\" variant=\"inherit\">\n    N/A\n  </Typography>\n);\n\nexport const NodeUptime: NodeFeatureRenderFn = ({ node }) => (\n  <React.Fragment>{formatDuration(getUptime(node.bootTime))}</React.Fragment>\n);\n\nexport const nodeUptimeAccessor: Accessor<NodeFeatureData> = ({ node }) =>\n  getUptime(node.bootTime);\n\nexport const WorkerUptime: WorkerFeatureRenderFn = ({ worker }) => (\n  <React.Fragment>\n    {formatDuration(getUptime(worker.createTime))}\n  </React.Fragment>\n);\n\nconst workerUptimeAccessor: Accessor<WorkerFeatureData> = ({ worker }) =>\n  getUptime(worker.createTime);\n\nconst uptimeFeature: NodeInfoFeature = {\n  id: \"uptime\",\n  NodeFeatureRenderFn: NodeUptime,\n  WorkerFeatureRenderFn: WorkerUptime,\n  nodeAccessor: nodeUptimeAccessor,\n  workerAccessor: workerUptimeAccessor,\n};\n\nexport default uptimeFeature;\n","import React from \"react\";\nimport {\n  ClusterFeatureRenderFn,\n  NodeFeatureRenderFn,\n  NodeInfoFeature,\n  WorkerFeatureRenderFn,\n} from \"./types\";\n\nexport const ClusterWorkers: ClusterFeatureRenderFn = ({ nodes }) => {\n  let totalCpus = 0;\n  let totalWorkers = 0;\n  for (const node of nodes) {\n    totalCpus += node.cpus[0];\n    totalWorkers += node.workers.length;\n  }\n  return (\n    <React.Fragment>\n      {totalWorkers.toLocaleString()}{\" \"}\n      {totalWorkers === 1 ? \"worker\" : \"workers\"} / {totalCpus.toLocaleString()}{\" \"}\n      {totalCpus === 1 ? \"core\" : \"cores\"}\n    </React.Fragment>\n  );\n};\n\nexport const NodeWorkers: NodeFeatureRenderFn = ({ node }) => {\n  const cpus = node.cpus[0];\n  const totalWorkers = node.workers.length;\n  return (\n    <React.Fragment>\n      {totalWorkers.toLocaleString()}{\" \"}\n      {totalWorkers === 1 ? \"worker\" : \"workers\"} / {cpus.toLocaleString()}{\" \"}\n      {cpus === 1 ? \"core\" : \"cores\"}\n    </React.Fragment>\n  );\n};\n\n// Ray worker process titles have one of the following forms: `ray::IDLE`,\n// `ray::function()`, `ray::Class`, or `ray::Class.method()`. We extract the\n// second portion here for display in the \"Workers\" column.\nexport const WorkerWorkers: WorkerFeatureRenderFn = ({ worker }) => (\n  <React.Fragment>{worker.cmdline[0].split(\"::\", 2)[1]}</React.Fragment>\n);\n\nconst workersFeature: NodeInfoFeature = {\n  id: \"workers\",\n  ClusterFeatureRenderFn: ClusterWorkers,\n  NodeFeatureRenderFn: NodeWorkers,\n  WorkerFeatureRenderFn: WorkerWorkers,\n};\n\nexport default workersFeature;\n","import { TableRow } from \"@material-ui/core\";\nimport React from \"react\";\nimport { StyledTableCell } from \"../../../common/TableCell\";\nimport { WorkerFeatureData, WorkerFeatureRenderFn } from \"./features/types\";\n\ntype NodeWorkerRowProps = {\n  features: WorkerFeatureRenderFn[];\n  data: WorkerFeatureData;\n};\n\nexport const NodeWorkerRow: React.FC<NodeWorkerRowProps> = ({\n  features,\n  data,\n}) => {\n  const { node, worker } = data;\n  return (\n    <TableRow hover>\n      <StyledTableCell />\n      {features.map((WorkerFeature, index) => (\n        <StyledTableCell key={index}>\n          <WorkerFeature node={node} worker={worker} />\n        </StyledTableCell>\n      ))}\n    </TableRow>\n  );\n};\n","import {\n  createStyles,\n  makeStyles,\n  TableCell,\n  TableRow,\n  Theme,\n} from \"@material-ui/core\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport classNames from \"classnames\";\nimport React, { useState } from \"react\";\nimport { NodeInfoResponse } from \"../../../api\";\nimport { StyledTableCell } from \"../../../common/TableCell\";\nimport { NodeInfoFeature, WorkerFeatureData } from \"./features/types\";\nimport { NodeWorkerRow } from \"./NodeWorkerRow\";\n\nconst useNodeRowGroupStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    cell: {\n      padding: theme.spacing(1),\n      textAlign: \"center\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(1),\n      },\n    },\n    expandCollapseCell: {\n      cursor: \"pointer\",\n    },\n    expandCollapseIcon: {\n      color: theme.palette.text.secondary,\n      fontSize: \"1.5em\",\n      verticalAlign: \"middle\",\n    },\n    extraInfo: {\n      fontFamily: \"SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace\",\n      whiteSpace: \"pre\",\n    },\n  }),\n);\n\ntype ArrayType<T> = T extends Array<infer U> ? U : never;\ntype Node = ArrayType<NodeInfoResponse[\"clients\"]>;\n\ntype NodeRowGroupProps = {\n  features: NodeInfoFeature[];\n  node: Node;\n  rayletInfo?: string;\n  workerFeatureData: WorkerFeatureData[];\n  initialExpanded: boolean;\n};\n\nconst NodeRowGroup: React.FC<NodeRowGroupProps> = ({\n  features,\n  node,\n  initialExpanded,\n  rayletInfo,\n  workerFeatureData,\n}) => {\n  const [expanded, setExpanded] = useState<boolean>(initialExpanded);\n  const toggleExpand = () => setExpanded(!expanded);\n  const classes = useNodeRowGroupStyles();\n  const renderedNodeFeatures = features.map((nodeInfoFeature, i) => {\n    const FeatureComponent = nodeInfoFeature.NodeFeatureRenderFn;\n    return (\n      <StyledTableCell className={classes.cell} key={i}>\n        <FeatureComponent node={node} />\n      </StyledTableCell>\n    );\n  });\n  return (\n    <React.Fragment>\n      <TableRow hover>\n        <TableCell\n          className={classNames(classes.cell, classes.expandCollapseCell)}\n          onClick={toggleExpand}\n        >\n          {!expanded ? (\n            <AddIcon className={classes.expandCollapseIcon} />\n          ) : (\n            <RemoveIcon className={classes.expandCollapseIcon} />\n          )}\n        </TableCell>\n        {renderedNodeFeatures}\n      </TableRow>\n      {expanded && (\n        <React.Fragment>\n          {rayletInfo !== undefined && (\n            <TableRow hover>\n              <TableCell className={classes.cell} />\n              <TableCell\n                className={classNames(classes.cell, classes.extraInfo)}\n                colSpan={features.length}\n              >\n                {rayletInfo}\n              </TableCell>\n            </TableRow>\n          )}\n          {workerFeatureData.map((featureData, index: number) => {\n            return (\n              <NodeWorkerRow\n                key={index}\n                features={features.map(\n                  (feature) => feature.WorkerFeatureRenderFn,\n                )}\n                data={featureData}\n              />\n            );\n          })}\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default NodeRowGroup;\n","import {\n  createStyles,\n  makeStyles,\n  TableCell,\n  TableRow,\n  Theme,\n} from \"@material-ui/core\";\nimport LayersIcon from \"@material-ui/icons/Layers\";\nimport React from \"react\";\nimport { NodeInfoResponse } from \"../../../api\";\nimport { StyledTableCell } from \"../../../common/TableCell\";\nimport { ClusterFeatureRenderFn } from \"./features/types\";\n\nconst useTotalRowStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    cell: {\n      borderTopColor: theme.palette.divider,\n      borderTopStyle: \"solid\",\n      borderTopWidth: 2,\n      padding: theme.spacing(1),\n      textAlign: \"center\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(1),\n      },\n    },\n    totalIcon: {\n      color: theme.palette.text.secondary,\n      fontSize: \"1.5em\",\n      verticalAlign: \"middle\",\n    },\n  }),\n);\n\ntype TotalRowProps = {\n  nodes: NodeInfoResponse[\"clients\"];\n  clusterTotalWorkers: number;\n  features: (ClusterFeatureRenderFn | undefined)[];\n};\n\nconst TotalRow: React.FC<TotalRowProps> = ({ nodes, features }) => {\n  const classes = useTotalRowStyles();\n  return (\n    <TableRow hover>\n      <TableCell className={classes.cell}>\n        <LayersIcon className={classes.totalIcon} />\n      </TableCell>\n      {features.map((ClusterFeature, index) =>\n        ClusterFeature ? (\n          <TableCell className={classes.cell} key={index}>\n            <ClusterFeature nodes={nodes} />\n          </TableCell>\n        ) : (\n          <StyledTableCell key={index} />\n        ),\n      )}\n    </TableRow>\n  );\n};\n\nexport default TotalRow;\n","import {\n  Checkbox,\n  createStyles,\n  FormControlLabel,\n  makeStyles,\n  Table,\n  TableBody,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport SortableTableHead, {\n  HeaderInfo,\n} from \"../../../common/SortableTableHead\";\nimport { getFnComparator, Order, stableSort } from \"../../../common/tableUtils\";\nimport { sum } from \"../../../common/util\";\nimport { StoreState } from \"../../../store\";\nimport Errors from \"./dialogs/errors/Errors\";\nimport Logs from \"./dialogs/logs/Logs\";\nimport cpuFeature from \"./features/CPU\";\nimport diskFeature from \"./features/Disk\";\nimport makeErrorsFeature from \"./features/Errors\";\nimport gpuFeature from \"./features/GPU\";\nimport gramFeature from \"./features/GRAM\";\nimport hostFeature from \"./features/Host\";\nimport makeLogsFeature from \"./features/Logs\";\nimport objectStoreMemoryFeature from \"./features/ObjectStoreMemory\";\nimport ramFeature from \"./features/RAM\";\nimport receivedFeature from \"./features/Received\";\nimport sentFeature from \"./features/Sent\";\nimport {\n  Node,\n  nodeInfoColumnId,\n  NodeInfoFeature,\n  WorkerFeatureData,\n} from \"./features/types\";\nimport uptimeFeature from \"./features/Uptime\";\nimport workersFeature from \"./features/Workers\";\nimport NodeRowGroup from \"./NodeRowGroup\";\nimport { NodeWorkerRow } from \"./NodeWorkerRow\";\nimport TotalRow from \"./TotalRow\";\n\nconst sortWorkers = (\n  workerFeatureData: WorkerFeatureData[],\n  sortWorkerComparator: any,\n) => {\n  // Sorts idle workers to end, applies the worker comparator function to sort\n  // then returns a new list of worker feature data.\n  const idleSortedClusterWorkers = workerFeatureData.sort((wfd1, wfd2) => {\n    const w1 = wfd1.worker;\n    const w2 = wfd2.worker;\n    if (w2.cmdline[0] === \"ray::IDLE\") {\n      return -1;\n    }\n    if (w1.cmdline[0] === \"ray::IDLE\") {\n      return 1;\n    }\n    return w1.pid < w2.pid ? -1 : 1;\n  });\n  return sortWorkerComparator\n    ? stableSort(idleSortedClusterWorkers, sortWorkerComparator)\n    : idleSortedClusterWorkers;\n};\n\nconst makeGroupedTableContents = (\n  nodes: Node[],\n  sortWorkerComparator: any,\n  sortGroupComparator: any,\n  nodeInfoFeatures: NodeInfoFeature[],\n) => {\n  const sortedGroups = sortGroupComparator\n    ? stableSort(nodes, sortGroupComparator)\n    : nodes;\n  return sortedGroups.map((node) => {\n    const workerFeatureData: WorkerFeatureData[] = node.workers.map(\n      (worker) => {\n        return {\n          node,\n          worker,\n        };\n      },\n    );\n\n    const sortedClusterWorkers = sortWorkers(\n      workerFeatureData,\n      sortWorkerComparator,\n    );\n    return (\n      <NodeRowGroup\n        key={node.raylet.nodeId}\n        node={node}\n        workerFeatureData={sortedClusterWorkers}\n        features={nodeInfoFeatures}\n        initialExpanded={nodes.length <= 1}\n      />\n    );\n  });\n};\n\nconst makeUngroupedTableContents = (\n  nodes: Node[],\n  sortWorkerComparator: any,\n  nodeInfoFeatures: NodeInfoFeature[],\n) => {\n  const workerInfoFeatures = nodeInfoFeatures.map(\n    (feature) => feature.WorkerFeatureRenderFn,\n  );\n  const allWorkerFeatures: WorkerFeatureData[] = nodes.flatMap((node) => {\n    return node.workers.map((worker) => {\n      return {\n        node,\n        worker,\n      };\n    });\n  });\n  const sortedWorkers = sortWorkers(allWorkerFeatures, sortWorkerComparator);\n  return sortedWorkers.map((workerFeatureDatum, i) => (\n    <NodeWorkerRow\n      features={workerInfoFeatures}\n      data={workerFeatureDatum}\n      key={`worker-${i}`}\n    />\n  ));\n};\n\nconst useNodeInfoStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    table: {\n      marginTop: theme.spacing(1),\n    },\n    cell: {\n      padding: theme.spacing(1),\n      textAlign: \"center\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(1),\n      },\n    },\n  }),\n);\n\n// Dead node payloads don't contain the full information needed to render\n// so we filter them out here.\nconst liveNodesSelector = (state: StoreState) =>\n  state.dashboard?.nodeInfo?.clients.filter(\n    (node) => node.raylet.state === \"ALIVE\",\n  );\n\ntype DialogState = {\n  nodeIp: string;\n  pid: number | null;\n} | null;\n\nconst nodeInfoHeaders: HeaderInfo<nodeInfoColumnId>[] = [\n  { id: \"host\", label: \"Host\", numeric: true, sortable: true },\n  { id: \"workers\", label: \"PID\", numeric: true, sortable: false },\n  { id: \"uptime\", label: \"Uptime (s)\", numeric: true, sortable: true },\n  { id: \"cpu\", label: \"CPU\", numeric: false, sortable: true },\n  { id: \"ram\", label: \"RAM\", numeric: true, sortable: true },\n  { id: \"gpu\", label: \"GPU\", numeric: true, sortable: true },\n  { id: \"gram\", label: \"GRAM\", numeric: true, sortable: true },\n  { id: \"objectStoreMemory\", label: \"Plasma\", numeric: false, sortable: true },\n  { id: \"disk\", label: \"Disk\", numeric: true, sortable: true },\n  { id: \"sent\", label: \"Sent\", numeric: true, sortable: true },\n  { id: \"received\", label: \"Received\", numeric: false, sortable: true },\n  { id: \"logs\", label: \"Logs\", numeric: false, sortable: true },\n  { id: \"errors\", label: \"Errors\", numeric: false, sortable: true },\n];\n\nconst NodeInfo: React.FC<{}> = () => {\n  const [logDialog, setLogDialog] = useState<DialogState>(null);\n  const [errorDialog, setErrorDialog] = useState<DialogState>(null);\n  const [isGrouped, setIsGrouped] = useState(true);\n  const [order, setOrder] = React.useState<Order>(\"asc\");\n  const toggleOrder = () => setOrder(order === \"asc\" ? \"desc\" : \"asc\");\n  const [orderBy, setOrderBy] = React.useState<nodeInfoColumnId | null>(null);\n  const classes = useNodeInfoStyles();\n  const nodes = useSelector(liveNodesSelector);\n  if (!nodes) {\n    return <Typography color=\"textSecondary\">Loading...</Typography>;\n  }\n  const clusterTotalWorkers = sum(nodes.map((n) => n.workers.length));\n  const nodeInfoFeatures: NodeInfoFeature[] = [\n    hostFeature,\n    workersFeature,\n    uptimeFeature,\n    cpuFeature,\n    ramFeature,\n    gpuFeature,\n    gramFeature,\n    objectStoreMemoryFeature,\n    diskFeature,\n    sentFeature,\n    receivedFeature,\n    makeLogsFeature((nodeIp, pid) => setLogDialog({ nodeIp, pid })),\n    makeErrorsFeature((nodeIp, pid) => setErrorDialog({ nodeIp, pid })),\n  ];\n  const sortNodeAccessor = nodeInfoFeatures.find(\n    (feature) => feature.id === orderBy,\n  )?.nodeAccessor;\n  const sortNodeComparator =\n    sortNodeAccessor && getFnComparator(order, sortNodeAccessor);\n  const sortWorkerAccessor = nodeInfoFeatures.find(\n    (feature) => feature.id === orderBy,\n  )?.workerAccessor;\n  const sortWorkerComparator =\n    sortWorkerAccessor && getFnComparator(order, sortWorkerAccessor);\n\n  // Show GPU features only if there is at least one GPU in cluster.\n  const showGPUs =\n    nodes.map((n) => n.gpus).filter((gpus) => gpus.length !== 0).length !== 0;\n  const filterPredicate = (\n    feature: NodeInfoFeature | HeaderInfo<nodeInfoColumnId>,\n  ) => showGPUs || (feature.id !== \"gpu\" && feature.id !== \"gram\");\n  const filteredFeatures = nodeInfoFeatures.filter(filterPredicate);\n  const filteredHeaders = nodeInfoHeaders.filter(filterPredicate);\n\n  const tableContents = isGrouped\n    ? makeGroupedTableContents(\n        nodes,\n        sortWorkerComparator,\n        sortNodeComparator,\n        filteredFeatures,\n      )\n    : makeUngroupedTableContents(nodes, sortWorkerComparator, filteredFeatures);\n  return (\n    <React.Fragment>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={isGrouped}\n            onChange={() => setIsGrouped(!isGrouped)}\n            color=\"primary\"\n          />\n        }\n        label=\"Group by host\"\n      />\n      <Table className={classes.table}>\n        <SortableTableHead\n          onRequestSort={(_, property) => {\n            if (property === orderBy) {\n              toggleOrder();\n            } else {\n              setOrderBy(property);\n              setOrder(\"asc\");\n            }\n          }}\n          headerInfo={filteredHeaders}\n          order={order}\n          orderBy={orderBy}\n          firstColumnEmpty={true}\n        />\n        <TableBody>\n          {tableContents}\n          <TotalRow\n            clusterTotalWorkers={clusterTotalWorkers}\n            nodes={nodes}\n            features={filteredFeatures.map(\n              (feature) => feature.ClusterFeatureRenderFn,\n            )}\n          />\n        </TableBody>\n      </Table>\n      {logDialog !== null && (\n        <Logs\n          clearLogDialog={() => setLogDialog(null)}\n          nodeIp={logDialog.nodeIp}\n          pid={logDialog.pid}\n        />\n      )}\n      {errorDialog !== null && (\n        <Errors\n          clearErrorDialog={() => setErrorDialog(null)}\n          nodeIp={errorDialog.nodeIp}\n          pid={errorDialog.pid}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nexport default NodeInfo;\n","import {\n  createStyles,\n  makeStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getRayConfig } from \"../../../api\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\n\nconst useRayConfigStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    table: {\n      marginTop: theme.spacing(1),\n      width: \"auto\",\n    },\n    cell: {\n      paddingTop: theme.spacing(1),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3),\n      paddingRight: theme.spacing(3),\n      textAlign: \"center\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(3),\n      },\n    },\n    key: {\n      color: theme.palette.text.secondary,\n    },\n  }),\n);\nconst { setRayConfig, setError } = dashboardActions;\nconst configSelector = (state: StoreState) => state.dashboard.rayConfig;\n\nconst RayConfig: React.FC = () => {\n  const classes = useRayConfigStyles();\n  const rayConfig = useSelector(configSelector);\n  const dispatch = useDispatch();\n  const refreshData = useCallback(async () => {\n    try {\n      const rayConfig = await getRayConfig();\n      dispatch(setRayConfig(rayConfig));\n    } catch (error) {\n      dispatch(setError(error.toString()));\n    }\n  }, [dispatch]);\n  const intervalId = useRef<any>(null);\n  useEffect(() => {\n    if (intervalId.current === null) {\n      refreshData();\n      intervalId.current = setInterval(refreshData, 10000);\n    }\n    const cleanup = () => {\n      clearInterval(intervalId.current);\n    };\n    return cleanup;\n  }, [refreshData]);\n  if (rayConfig === null) {\n    return (\n      <Typography color=\"textSecondary\">\n        No Ray configuration detected.\n      </Typography>\n    );\n  }\n\n  const formattedRayConfig = [\n    {\n      key: \"Autoscaling mode\",\n      value: rayConfig.autoscalingMode,\n    },\n    {\n      key: \"Head node type\",\n      value: rayConfig.headType,\n    },\n    {\n      key: \"Worker node type\",\n      value: rayConfig.workerType,\n    },\n    {\n      key: \"Min worker nodes\",\n      value: rayConfig.minWorkers,\n    },\n    {\n      key: \"Initial worker nodes\",\n      value: rayConfig.initialWorkers,\n    },\n    {\n      key: \"Max worker nodes\",\n      value: rayConfig.maxWorkers,\n    },\n    {\n      key: \"Idle timeout\",\n      value: `${rayConfig.idleTimeoutMinutes} ${\n        rayConfig.idleTimeoutMinutes === 1 ? \"minute\" : \"minutes\"\n      }`,\n    },\n  ];\n\n  return (\n    <div>\n      <Typography>Ray cluster configuration:</Typography>\n      <Table className={classes.table}>\n        <TableHead>\n          <TableRow>\n            <TableCell className={classes.cell}>Setting</TableCell>\n            <TableCell className={classes.cell}>Value</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {formattedRayConfig.map(({ key, value }, index) => (\n            <TableRow key={index}>\n              <TableCell className={classNames(classes.cell, classes.key)}>\n                {key}\n              </TableCell>\n              <TableCell className={classes.cell}>{value}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </div>\n  );\n};\n\nexport default RayConfig;\n","import {\n  createStyles,\n  Link,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Theme,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport DialogWithTitle from \"../../../common/DialogWithTitle\";\nimport NumberedLines from \"../../../common/NumberedLines\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    table: {\n      marginTop: theme.spacing(1),\n    },\n    cell: {\n      padding: theme.spacing(1),\n      textAlign: \"center\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(1),\n      },\n    },\n  });\n\nconst mapStateToProps = (state: StoreState) => ({\n  tuneInfo: state.dashboard.tuneInfo,\n});\n\nconst mapDispatchToProps = dashboardActions;\n\ntype State = {\n  currentError: string;\n  open: boolean;\n};\n\nclass TuneErrors extends React.Component<\n  WithStyles<typeof styles> &\n    ReturnType<typeof mapStateToProps> &\n    typeof mapDispatchToProps,\n  State\n> {\n  state: State = {\n    currentError: \"\",\n    open: false,\n  };\n\n  handleOpen = (key: string) => {\n    this.setState({\n      open: true,\n      currentError: key,\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      open: false,\n    });\n  };\n\n  render() {\n    const { classes, tuneInfo } = this.props;\n    const { currentError, open } = this.state;\n\n    if (tuneInfo === null || Object.keys(tuneInfo.errors).length === 0) {\n      return null;\n    }\n\n    return (\n      <React.Fragment>\n        <Table className={classes.table}>\n          <TableHead>\n            <TableRow>\n              <TableCell className={classes.cell}> Job ID</TableCell>\n              <TableCell className={classes.cell}> Trial ID </TableCell>\n              <TableCell className={classes.cell}> Trial Directory </TableCell>\n              <TableCell className={classes.cell}> Error </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {tuneInfo.errors !== null &&\n              Object.keys(tuneInfo.errors).map((key, index) => (\n                <TableRow key={index}>\n                  <TableCell className={classes.cell}>\n                    {tuneInfo.errors[key].jobId}\n                  </TableCell>\n                  <TableCell className={classes.cell}>\n                    {tuneInfo.errors[key].trialId}\n                  </TableCell>\n                  <TableCell className={classes.cell}>{key}</TableCell>\n                  <TableCell className={classes.cell}>\n                    <Link\n                      component=\"button\"\n                      variant=\"body2\"\n                      onClick={() => {\n                        this.handleOpen(key);\n                      }}\n                    >\n                      Show Error\n                    </Link>\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n        </Table>\n        {open && (\n          <DialogWithTitle handleClose={this.handleClose} title=\"Error Log\">\n            {open && (\n              <NumberedLines\n                lines={tuneInfo.errors[currentError].text.trim().split(\"\\n\")}\n              />\n            )}\n          </DialogWithTitle>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withStyles(styles)(TuneErrors));\n","import {\n  Checkbox,\n  createStyles,\n  FormControl,\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  Grid,\n  Link,\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  TableSortLabel,\n  Theme,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { TuneTrial } from \"../../../api\";\nimport DialogWithTitle from \"../../../common/DialogWithTitle\";\nimport { formatValue } from \"../../../common/formatUtils\";\nimport NumberedLines from \"../../../common/NumberedLines\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      \"& > :not(:first-child)\": {\n        marginTop: theme.spacing(2),\n      },\n    },\n    table: {\n      marginTop: theme.spacing(1),\n      height: \"700px\",\n      overflowY: \"auto\",\n    },\n    cell: {\n      padding: theme.spacing(1),\n      textAlign: \"right\",\n      \"&:last-child\": {\n        paddingRight: theme.spacing(1),\n      },\n    },\n    checkboxRoot: {\n      height: \"500px\",\n      overflowY: \"auto\",\n      overflowX: \"auto\",\n    },\n    paramChecklist: {\n      marginBottom: theme.spacing(2),\n    },\n  });\n\nconst mapStateToProps = (state: StoreState) => ({\n  tuneInfo: state.dashboard.tuneInfo,\n});\n\ntype State = {\n  metricParamColumn: string;\n  ascending: boolean;\n  sortedColumn: keyof TuneTrial | undefined;\n  metricColumns: string[];\n  paramColumns: string[];\n  errorTrial: string;\n  open: boolean;\n};\n\nconst mapDispatchToProps = dashboardActions;\n\nclass TuneTable extends React.Component<\n  WithStyles<typeof styles> &\n    ReturnType<typeof mapStateToProps> &\n    typeof mapDispatchToProps,\n  State\n> {\n  timeout: number = 0;\n\n  state: State = {\n    sortedColumn: undefined,\n    ascending: true,\n    metricParamColumn: \"\",\n    metricColumns: [],\n    paramColumns: [],\n    errorTrial: \"\",\n    open: false,\n  };\n\n  onColumnClick = (column: keyof TuneTrial, metricParamColumn?: string) => {\n    let ascending = this.state.ascending;\n    if (column === this.state.sortedColumn) {\n      ascending = !ascending;\n    } else {\n      ascending = true;\n    }\n    this.setState({\n      sortedColumn: column,\n      ascending: ascending,\n    });\n\n    if (metricParamColumn) {\n      this.setState({\n        metricParamColumn: metricParamColumn,\n      });\n    }\n  };\n\n  /**\n   * Replaces all underscores with spaces and capitalizes all words\n   * in str\n   */\n  humanize = (str: string) =>\n    str\n      .split(\"_\")\n      .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n      .join(\" \");\n\n  handleOpen = (key: string | number) => {\n    if (typeof key === \"number\") {\n      key = key.toString();\n    }\n    this.setState({\n      open: true,\n      errorTrial: key,\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      open: false,\n    });\n  };\n\n  sortedCell = (\n    name: keyof TuneTrial,\n    chosenMetricParam?: string,\n    index?: number,\n  ) => {\n    const { tuneInfo, classes } = this.props;\n    const { sortedColumn, ascending, metricParamColumn } = this.state;\n    let label: \"desc\" | \"asc\" = \"asc\";\n\n    if (name === sortedColumn && !ascending) {\n      label = \"desc\";\n    }\n\n    if (tuneInfo === null) {\n      return;\n    }\n\n    let onClick = () => this.onColumnClick(name);\n    if (chosenMetricParam) {\n      onClick = () => this.onColumnClick(name, chosenMetricParam);\n    }\n\n    if (!index) {\n      index = 0;\n    }\n\n    let active = false;\n    let key: string = name + index.toString();\n    if (chosenMetricParam) {\n      key = chosenMetricParam + index.toString();\n      active = chosenMetricParam === metricParamColumn && sortedColumn === name;\n    } else {\n      active = name === sortedColumn;\n    }\n\n    return (\n      <TableCell className={classes.cell} key={key} onClick={onClick}>\n        <TableSortLabel active={active} direction={label} />\n        {chosenMetricParam\n          ? this.humanize(chosenMetricParam)\n          : this.humanize(name)}\n      </TableCell>\n    );\n  };\n\n  sortedTrialRecords = () => {\n    const { tuneInfo } = this.props;\n    const { sortedColumn, ascending, metricParamColumn } = this.state;\n\n    if (tuneInfo === null || Object.keys(tuneInfo.trialRecords).length === 0) {\n      return null;\n    }\n\n    const trialDetails = Object.values(tuneInfo.trialRecords);\n\n    if (!sortedColumn) {\n      return trialDetails;\n    }\n\n    let getAttribute = (trial: TuneTrial) => trial[sortedColumn!];\n    if (sortedColumn === \"metrics\" || sortedColumn === \"params\") {\n      getAttribute = (trial: TuneTrial) =>\n        trial[sortedColumn!][metricParamColumn];\n    }\n\n    if (sortedColumn) {\n      if (ascending) {\n        trialDetails.sort((a, b) =>\n          getAttribute(a) > getAttribute(b) ? 1 : -1,\n        );\n      } else if (!ascending) {\n        trialDetails.sort((a, b) =>\n          getAttribute(a) < getAttribute(b) ? 1 : -1,\n        );\n      }\n    }\n\n    return trialDetails;\n  };\n\n  handleMetricChoiceChange = (name: string) => (\n    event: React.ChangeEvent<HTMLInputElement>,\n  ) => {\n    let { metricColumns } = this.state;\n    if (event.target.checked) {\n      metricColumns.push(name);\n      this.setState({\n        metricColumns: metricColumns,\n      });\n    } else {\n      metricColumns = metricColumns.filter((value) => value !== name);\n      this.setState({\n        metricColumns: metricColumns,\n      });\n    }\n  };\n\n  metricChoices = (metricNames: string[]) => {\n    const { metricColumns } = this.state;\n\n    return (\n      <FormControl>\n        <FormLabel component=\"legend\">Select Metrics </FormLabel>\n        <FormGroup>\n          {metricNames.map((value) => (\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={metricColumns.includes(value)}\n                  onChange={this.handleMetricChoiceChange(value)}\n                  value={value}\n                  color=\"primary\"\n                />\n              }\n              label={value}\n            />\n          ))}\n        </FormGroup>\n      </FormControl>\n    );\n  };\n\n  handleParamChoiceChange = (name: string) => (\n    event: React.ChangeEvent<HTMLInputElement>,\n  ) => {\n    let { paramColumns } = this.state;\n    if (event.target.checked) {\n      paramColumns.push(name);\n      this.setState({\n        paramColumns: paramColumns,\n      });\n    } else {\n      paramColumns = paramColumns.filter((value) => value !== name);\n      this.setState({\n        paramColumns: paramColumns,\n      });\n    }\n  };\n\n  paramChoices = (paramNames: string[]) => {\n    const { classes } = this.props;\n    const { paramColumns } = this.state;\n    return (\n      <FormControl className={classes.paramChecklist}>\n        <FormLabel component=\"legend\">Select Parameters </FormLabel>\n        <FormGroup>\n          {paramNames.map((value) => (\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={paramColumns.includes(value)}\n                  onChange={this.handleParamChoiceChange(value)}\n                  value={value}\n                  color=\"primary\"\n                />\n              }\n              label={value}\n            />\n          ))}\n        </FormGroup>\n      </FormControl>\n    );\n  };\n\n  render() {\n    const { classes, tuneInfo } = this.props;\n\n    const { metricColumns, paramColumns, open, errorTrial } = this.state;\n\n    if (tuneInfo === null || Object.keys(tuneInfo.trialRecords).length === 0) {\n      return null;\n    }\n\n    const firstTrial = Object.keys(tuneInfo.trialRecords)[0];\n    const paramsDict = tuneInfo.trialRecords[firstTrial].params;\n    const paramNames = Object.keys(paramsDict).filter((k) => k !== \"args\");\n\n    let viewableParams = paramNames;\n    const paramOptions = paramNames.length > 3;\n    if (paramOptions) {\n      if (paramColumns.length === 0) {\n        this.setState({\n          paramColumns: paramNames.slice(0, 3),\n        });\n      }\n      viewableParams = paramColumns;\n    }\n\n    const metricNames = Object.keys(tuneInfo.trialRecords[firstTrial].metrics);\n\n    let viewableMetrics = metricNames;\n    const metricOptions = metricNames.length > 3;\n    if (metricOptions) {\n      if (metricColumns.length === 0) {\n        this.setState({\n          metricColumns: metricNames.slice(0, 3),\n        });\n      }\n      viewableMetrics = metricColumns;\n    }\n\n    const trialDetails = this.sortedTrialRecords();\n\n    return (\n      <div className={classes.root}>\n        <Grid container spacing={0}>\n          {(paramOptions || metricOptions) && (\n            <Grid item xs={2} className={classes.checkboxRoot}>\n              {paramOptions && this.paramChoices(paramNames)}\n              {metricOptions && this.metricChoices(metricNames)}\n            </Grid>\n          )}\n          <Grid\n            item\n            xs={paramOptions || metricOptions ? 10 : 12}\n            className={classes.table}\n          >\n            <Table stickyHeader>\n              <TableHead>\n                <TableRow>\n                  {this.sortedCell(\"trialId\")}\n                  {this.sortedCell(\"jobId\")}\n                  {this.sortedCell(\"startTime\")}\n                  {viewableParams.map((value, index) =>\n                    this.sortedCell(\"params\", value, index),\n                  )}\n                  {this.sortedCell(\"status\")}\n                  {viewableMetrics.map((value, index) =>\n                    this.sortedCell(\"metrics\", value, index),\n                  )}\n                  <TableCell className={classes.cell} key=\"error\">\n                    Error\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {trialDetails !== null &&\n                  trialDetails.map((trial, index) => (\n                    <TableRow key={index}>\n                      <TableCell className={classes.cell}>\n                        {trial.trialId}\n                      </TableCell>\n                      <TableCell className={classes.cell}>\n                        {trial.jobId}\n                      </TableCell>\n                      <TableCell className={classes.cell}>\n                        {trial.startTime}\n                      </TableCell>\n                      {viewableParams.map((value, index) => (\n                        <TableCell className={classes.cell} key={index}>\n                          {typeof trial.params[value] === \"number\"\n                            ? formatValue(Number(trial.params[value]))\n                            : trial.params[value]}\n                        </TableCell>\n                      ))}\n                      <TableCell className={classes.cell}>\n                        {trial[\"status\"]}\n                      </TableCell>\n                      {trial.metrics &&\n                        viewableMetrics.map((value, index) => (\n                          <TableCell className={classes.cell} key={index}>\n                            {typeof trial.metrics[value] === \"number\"\n                              ? formatValue(Number(trial.metrics[value]))\n                              : trial.metrics[value]}\n                          </TableCell>\n                        ))}\n                      <TableCell className={classes.cell}>\n                        {trial[\"error\"] === \"No Error\" ? (\n                          \"No Error\"\n                        ) : (\n                          <Link\n                            component=\"button\"\n                            variant=\"body2\"\n                            onClick={() => {\n                              this.handleOpen(trial.trialId);\n                            }}\n                          >\n                            Show Error\n                          </Link>\n                        )}\n                      </TableCell>\n                    </TableRow>\n                  ))}\n              </TableBody>\n            </Table>\n          </Grid>\n        </Grid>\n        {open && (\n          <DialogWithTitle handleClose={this.handleClose} title=\"Error Log\">\n            {open && (\n              <NumberedLines\n                lines={tuneInfo.trialRecords[errorTrial].error\n                  .trim()\n                  .split(\"\\n\")}\n              />\n            )}\n          </DialogWithTitle>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withStyles(styles)(TuneTable));\n","import {\n  Button,\n  CircularProgress,\n  createStyles,\n  Theme,\n  Typography,\n  withStyles,\n  WithStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { enableTuneTensorBoard } from \"../../../api\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(2),\n      \"& > :not(:first-child)\": {\n        marginTop: theme.spacing(4),\n      },\n    },\n    board: {\n      width: \"100%\",\n      height: \"1000px\",\n      border: \"none\",\n    },\n    warning: {\n      fontSize: \"0.8125rem\",\n    },\n    progress: {\n      marginLeft: \"10px\",\n      marginTop: \"2px\",\n    },\n  });\n\nconst mapStateToProps = (state: StoreState) => ({\n  error: state.dashboard.error,\n  tuneInfo: state.dashboard.tuneInfo,\n});\n\ntype State = {\n  tensorBoardEnabled: boolean;\n  loading: boolean;\n};\n\nconst mapDispatchToProps = dashboardActions;\n\nclass TuneTensorBoard extends React.Component<\n  WithStyles<typeof styles> &\n    ReturnType<typeof mapStateToProps> &\n    typeof mapDispatchToProps,\n  State\n> {\n  state: State = {\n    tensorBoardEnabled: false,\n    loading: false,\n  };\n\n  enableTensorBoard() {\n    enableTuneTensorBoard();\n    this.setState({\n      tensorBoardEnabled: true,\n    });\n  }\n\n  handleSubmit = () => {\n    this.setState({ loading: true });\n    enableTuneTensorBoard().then(() => {\n      this.setState({ loading: false });\n    });\n  };\n\n  tensorBoard = () => {\n    const { classes, error, tuneInfo } = this.props;\n\n    return (\n      <div>\n        {error === \"TypeError: Failed to fetch\" && (\n          <Typography className={classes.warning} color=\"textSecondary\">\n            Warning: Tensorboard server closed. View Tensorboard by running\n            \"tensorboard --logdir\" if not displaying below.\n          </Typography>\n        )}\n        {tuneInfo && !tuneInfo.tensorboard.tensorboardCurrent && (\n          <Typography className={classes.warning} color=\"textSecondary\">\n            The below Tensorboard reflects a previously entered log directory.\n            Restart the Ray Dashboard to change the Tensorboard logdir.\n          </Typography>\n        )}\n        <iframe\n          src=\"http://localhost:6006/\"\n          className={classes.board}\n          title=\"TensorBoard\"\n        ></iframe>\n      </div>\n    );\n  };\n\n  render() {\n    const { classes, tuneInfo } = this.props;\n\n    const { loading } = this.state;\n\n    if (tuneInfo === null) {\n      return;\n    }\n    const enabled = tuneInfo.tensorboard.tensorboardEnabled;\n    return (\n      <div className={classes.root}>\n        {!enabled && (\n          <div>\n            <Button\n              variant=\"outlined\"\n              onClick={this.handleSubmit}\n              className={classes.warning}\n            >\n              Enable TensorBoard\n            </Button>\n            {loading && (\n              <CircularProgress className={classes.progress} size={25} />\n            )}\n          </div>\n        )}\n\n        {enabled && this.tensorBoard()}\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withStyles(styles)(TuneTensorBoard));\n","import {\n  Button,\n  CircularProgress,\n  createStyles,\n  Tab,\n  Tabs,\n  TextField,\n  Theme,\n  Typography,\n  WithStyles,\n  withStyles,\n} from \"@material-ui/core\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { getTuneInfo, setTuneExperiment } from \"../../../api\";\nimport { StoreState } from \"../../../store\";\nimport { dashboardActions } from \"../state\";\nimport TuneErrors from \"./TuneErrors\";\nimport TuneTable from \"./TuneTable\";\nimport TuneTensorBoard from \"./TuneTensorBoard\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper,\n    },\n    tabs: {\n      borderBottomColor: theme.palette.divider,\n      borderBottomStyle: \"solid\",\n      borderBottomWidth: 1,\n    },\n    heading: {\n      fontsize: \"0.9em\",\n      marginTop: theme.spacing(2),\n    },\n    warning: {\n      fontSize: \"1em\",\n    },\n    warningIcon: {\n      fontSize: \"1.25em\",\n      verticalAlign: \"text-bottom\",\n    },\n    formControl: {\n      margin: theme.spacing(1),\n      minWidth: 120,\n    },\n    submit: {\n      marginLeft: theme.spacing(2),\n      fontSize: \"0.8125em\",\n    },\n    prompt: {\n      fontSize: \"1em\",\n      marginTop: theme.spacing(1),\n    },\n    input: {\n      width: \"85%\",\n    },\n    progress: {\n      marginLeft: theme.spacing(2),\n    },\n  });\n\nconst mapStateToProps = (state: StoreState) => ({\n  tuneInfo: state.dashboard.tuneInfo,\n  tuneAvailability: state.dashboard.tuneAvailability,\n});\n\nconst mapDispatchToProps = dashboardActions;\n\ntype State = {\n  tabIndex: number;\n  experiment: string;\n  loading: boolean;\n};\n\nclass Tune extends React.Component<\n  WithStyles<typeof styles> &\n    ReturnType<typeof mapStateToProps> &\n    typeof mapDispatchToProps,\n  State\n> {\n  timeout: number = 0;\n\n  state: State = {\n    tabIndex: 0,\n    experiment: \"\",\n    loading: false,\n  };\n\n  refreshTuneInfo = async () => {\n    try {\n      if (\n        this.props.tuneAvailability &&\n        this.props.tuneAvailability.available\n      ) {\n        const tuneInfo = await getTuneInfo();\n        this.props.setTuneInfo(tuneInfo);\n      }\n    } catch (error) {\n      this.props.setError(error.toString());\n    } finally {\n      this.timeout = window.setTimeout(this.refreshTuneInfo, 1000);\n    }\n  };\n\n  async componentWillUnmount() {\n    window.clearTimeout(this.timeout);\n  }\n\n  handleTabChange = (event: React.ChangeEvent<{}>, value: number) => {\n    this.setState({\n      tabIndex: value,\n    });\n  };\n\n  handleExperimentChange = (event: React.ChangeEvent<{ value: any }>) => {\n    this.setState({\n      experiment: event.target.value,\n    });\n  };\n\n  handleExperimentSubmit = async () => {\n    this.setState({ loading: true });\n    try {\n      await setTuneExperiment(this.state.experiment);\n      window.clearTimeout(this.timeout);\n      await this.refreshTuneInfo();\n      this.setState({ loading: false });\n    } catch (error) {\n      this.props.setError(error.toString());\n      this.setState({ loading: false });\n    }\n  };\n\n  experimentChoice = (prompt: boolean) => {\n    const { classes } = this.props;\n\n    const { loading } = this.state;\n    return (\n      <div>\n        {prompt && (\n          <Typography className={classes.heading} color=\"textPrimary\">\n            You can use this tab to monitor Tune jobs, their statuses,\n            hyperparameters, and more. For more information, read the\n            documentation{\" \"}\n            <a href=\"https://docs.ray.io/en/master/ray-dashboard.html#tune\">\n              here\n            </a>\n            .\n          </Typography>\n        )}\n        <div>\n          <Typography className={classes.prompt} color=\"textSecondary\">\n            Enter Tune Log Directory Here:\n          </Typography>\n          <TextField\n            className={classes.input}\n            id=\"standard-basic\"\n            value={this.state.experiment}\n            onChange={this.handleExperimentChange}\n          />\n          <Button\n            className={classes.submit}\n            variant=\"outlined\"\n            onClick={this.handleExperimentSubmit}\n          >\n            Submit\n          </Button>\n          {loading && (\n            <CircularProgress className={classes.progress} size={25} />\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    const { classes, tuneInfo, tuneAvailability } = this.props;\n\n    if (tuneAvailability && !tuneAvailability.trialsAvailable) {\n      return this.experimentChoice(true);\n    }\n\n    const { tabIndex } = this.state;\n\n    const tabs = [\n      { label: \"Table\", component: TuneTable },\n      { label: \"TensorBoard\", component: TuneTensorBoard },\n    ];\n\n    if (tuneInfo !== null && Object.keys(tuneInfo.errors).length > 0) {\n      tabs.push({ label: \"Errors\", component: TuneErrors });\n    }\n\n    const SelectedComponent = tabs[tabIndex].component;\n    return (\n      <div className={classes.root}>\n        {this.experimentChoice(false)}\n        <Tabs\n          className={classes.tabs}\n          indicatorColor=\"primary\"\n          onChange={this.handleTabChange}\n          textColor=\"primary\"\n          value={tabIndex}\n        >\n          {tabs.map(({ label }) => (\n            <Tab key={label} label={label} />\n          ))}\n        </Tabs>\n        <SelectedComponent />\n      </div>\n    );\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withStyles(styles)(Tune));\n","import {\n  createStyles,\n  makeStyles,\n  Tab,\n  Tabs,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getActorGroups, getNodeInfo, getTuneAvailability } from \"../../api\";\nimport { StoreState } from \"../../store\";\nimport LastUpdated from \"./LastUpdated\";\nimport LogicalView from \"./logical-view/LogicalView\";\nimport MemoryInfo from \"./memory/Memory\";\nimport NodeInfo from \"./node-info/NodeInfo\";\nimport RayConfig from \"./ray-config/RayConfig\";\nimport { dashboardActions } from \"./state\";\nimport Tune from \"./tune/Tune\";\n\nconst {\n  setNodeInfo,\n  setTuneAvailability,\n  setActorGroups,\n  setError,\n  setTab,\n} = dashboardActions;\nconst useDashboardStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      backgroundColor: theme.palette.background.paper,\n      padding: theme.spacing(2),\n      \"& > :not(:first-child)\": {\n        marginTop: theme.spacing(4),\n      },\n    },\n    tabs: {\n      borderBottomColor: theme.palette.divider,\n      borderBottomStyle: \"solid\",\n      borderBottomWidth: 1,\n    },\n  }),\n);\n\nconst tabSelector = (state: StoreState) => state.dashboard.tab;\nconst tuneAvailabilitySelector = (state: StoreState) =>\n  state.dashboard.tuneAvailability;\n\nconst allTabs = [\n  { label: \"Machine view\", component: NodeInfo },\n  { label: \"Logical view\", component: LogicalView },\n  { label: \"Memory\", component: MemoryInfo },\n  { label: \"Ray config\", component: RayConfig },\n  { label: \"Tune\", component: Tune },\n];\n\nconst Dashboard: React.FC = () => {\n  const dispatch = useDispatch();\n  const tuneAvailability = useSelector(tuneAvailabilitySelector);\n  const tab = useSelector(tabSelector);\n  const classes = useDashboardStyles();\n\n  // Polling Function\n  const refreshInfo = useCallback(async () => {\n    try {\n      const [nodeInfo, tuneAvailability, actorGroups] = await Promise.all([\n        getNodeInfo(),\n        getTuneAvailability(),\n        getActorGroups(),\n      ]);\n      dispatch(setNodeInfo({ nodeInfo }));\n      dispatch(setTuneAvailability(tuneAvailability));\n      dispatch(setActorGroups(actorGroups));\n      dispatch(setError(null));\n    } catch (error) {\n      dispatch(setError(error.toString()));\n    }\n  }, [dispatch]);\n\n  // Run the poller\n  const intervalId = useRef<any>(null);\n  useEffect(() => {\n    if (intervalId.current === null) {\n      refreshInfo();\n      intervalId.current = setInterval(refreshInfo, 1000);\n    }\n    const cleanup = () => {\n      clearInterval(intervalId.current);\n    };\n    return cleanup;\n  }, [refreshInfo]);\n\n  const handleTabChange = (_: any, value: number) => dispatch(setTab(value));\n\n  const tabs = allTabs.slice();\n\n  // if Tune information is not available, remove Tune tab from the dashboard\n  if (tuneAvailability === null || !tuneAvailability.available) {\n    tabs.splice(4);\n  }\n\n  const SelectedComponent = tabs[tab].component;\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"h5\">Ray Dashboard</Typography>\n      <Tabs\n        className={classes.tabs}\n        indicatorColor=\"primary\"\n        onChange={handleTabChange}\n        textColor=\"primary\"\n        value={tab}\n      >\n        {tabs.map(({ label }) => (\n          <Tab key={label} label={label} />\n        ))}\n      </Tabs>\n      <SelectedComponent />\n      <LastUpdated />\n    </div>\n  );\n};\n\nexport default Dashboard;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { dashboardReducer } from \"./pages/dashboard/state\";\n\nexport const store = configureStore({\n  reducer: {\n    dashboard: dashboardReducer,\n  },\n  devTools: process.env.NODE_ENV === \"development\",\n});\n\nexport type StoreState = ReturnType<typeof store.getState>;\n","import { CssBaseline } from \"@material-ui/core\";\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport Dashboard from \"./pages/dashboard/Dashboard\";\nimport { store } from \"./store\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <BrowserRouter>\n          <CssBaseline />\n          <Route component={Dashboard} exact path=\"/\" />\n        </BrowserRouter>\n      </Provider>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-roboto\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}